<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
<!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5B6V6ZJ');</script>
    <!-- End Google Tag Manager -->    
        
    <meta charset="utf-8">
    
    <title>Niraj Sonawane</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta property="og:type" content="website">
<meta property="og:title" content="Niraj Sonawane">
<meta property="og:url" content="https://nirajsonawane.github.io/index.html">
<meta property="og:site_name" content="Niraj Sonawane">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Niraj Sonawane">
    

    

    
        <link rel="icon" href="https://raw.githubusercontent.com/nirajsonawane/portfolio/master/images/icon.png">
    

    <link rel="stylesheet" href="/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-125455524-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>
</html>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Niraj Sonawane</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About Me</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://www.gravatar.com/avatar/8328f9fc834752ead8a75bf4950fa304" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About Me</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://www.gravatar.com/avatar/8328f9fc834752ead8a75bf4950fa304?s=128" />
            <h2 id="name">Niraj Sonawane</h2>
            <h3 id="title">I am a Java developer, open-source contributor, student and lifelong learner.</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>Pune, India</span>
            <a id="follow" target="_blank" href="https://github.com/nirajsonawane">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                60
                <span>posts</span>
            </div>
            <div class="article-info-block">
                70
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/nirajsonawane/" target="_blank" title="github" class=tooltip>
                            <i class="fab fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://stackoverflow.com/users/320087/niraj-sonawane?tab=profile" target="_blank" title="stack-overflow" class=tooltip>
                            <i class="fab fa-stack-overflow"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-Spring-Boot-AWS-RDS" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2022/04/18/Spring-Boot-AWS-RDS/">Spring Boot With AWS RDS - Part 1</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2022/04/18/Spring-Boot-AWS-RDS/">
            <time datetime="2022-04-18T09:56:34.000Z" itemprop="datePublished">2022-04-18</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/AWS/">AWS</a>, <a class="tag-link" href="/tags/PostgreSQL/">PostgreSQL</a>, <a class="tag-link" href="/tags/RDS/">RDS</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h3 id="What-is-AWS-RDS"><a href="#What-is-AWS-RDS" class="headerlink" title="What is AWS RDS?"></a>What is AWS RDS?</h3><p>AWS RDS is a collection of managed services that makes it simple to set up, operate, and scale databases in the cloud. AWS RDS provides multiple DB Engines options like MySQL, PostgreSQL,MariaDB, Oracle SQL Server.</p>
<p>As Amazon RDS handles routine database tasks such as provisioning, patching, backup, recovery, failure detection, and repair. This brings a lot of convenience to RDS users and provides. RDS also provides other features like replication, enhance availability and reliability.</p>
<p>In this article we will examine how to use Spring boot to access AWS RDS PostgreSQL. Amazon RDS for PostgreSQL provides access to the capabilities of the familiar PostgreSQL database engine.</p>
<h3 id="Creating-PostgreSQL-DB-Instance-on-AWS"><a href="#Creating-PostgreSQL-DB-Instance-on-AWS" class="headerlink" title="Creating PostgreSQL DB Instance on AWS"></a>Creating PostgreSQL DB Instance on AWS</h3><p>Go to RDS-&gt;Databases-&gt;Create Database  for creating new database instance. Select PostgreSQL as engine type.<br>For this demo i am using below setting. (These configurations are not recommended for production usage) </p>
<ol>
<li>Free tier, </li>
<li>DB instance identifier : employee-db</li>
<li>Credential: Master username</li>
<li>VPC : Default </li>
<li>Public Access:True</li>
<li>Security Group:Default</li>
<li>Initial database name:employee</li>
</ol>
<img src="/2022/04/18/Spring-Boot-AWS-RDS/1.png">
<img src="/2022/04/18/Spring-Boot-AWS-RDS/2.png">
<img src="/2022/04/18/Spring-Boot-AWS-RDS/3.png">
<p>Onces the database is ready, Note the <strong>Endpoint url</strong>   which we will use as <code>spring.datasource.url</code><br><img src="/2022/04/18/Spring-Boot-AWS-RDS/5.png"></p>
<h3 id="Setting-up-Spring-Boot-Project"><a href="#Setting-up-Spring-Boot-Project" class="headerlink" title="Setting up Spring Boot Project"></a>Setting up Spring Boot Project</h3><p>We do not need any AWS specific dependancy, Only JPA,spring-web &amp; postgresql dependancy are needed.<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">	<span class="string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line">	<span class="string">&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">	<span class="string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line">	<span class="string">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">	<span class="string">&lt;groupId&gt;org.postgresql&lt;/groupId&gt;</span></span><br><span class="line">	<span class="string">&lt;artifactId&gt;postgresql&lt;/artifactId&gt;</span></span><br><span class="line">	<span class="string">&lt;scope&gt;runtime&lt;/scope&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight yaml"><figcaption><span>Data source configurations</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring.datasource.url=jdbc:postgresql://&lt;database-endpoint-url&gt;:&lt;port&gt;/&lt;database&gt;</span> </span><br><span class="line"><span class="string">spring.datasource.username=admin1</span></span><br><span class="line"><span class="string">spring.datasource.password=Admin123</span></span><br><span class="line"><span class="string">spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect</span></span><br><span class="line"><span class="string">spring.jpa.hibernate.ddl-auto=update</span></span><br><span class="line"><span class="string">spring.jpa.hibernate.show-sql=true</span></span><br></pre></td></tr></table></figure>
<p>Onces the database connection is done, We can simply use the JAP Repository to interact with database.</p>
<figure class="highlight java"><figcaption><span>Controller</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/employee"</span>)</span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> EmployeeRepository repository;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">createEmployee</span><span class="params">(@RequestBody CreateEmployeeRequest request)</span> </span>&#123;</span><br><span class="line">        repository.save(<span class="keyword">new</span> Employee(request.getId(), request.getFirstName(), request.getLastName()));</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity</span><br><span class="line">                .status(HttpStatus.CREATED)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title">getAllEmployee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> repository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>Entity And Repository</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> UUID id;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Employee</span>, <span class="title">UUID</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-aws-postgresql" target="_blank" rel="noopener">here</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2022/04/18/Spring-Boot-AWS-RDS/" data-id="cl250z73d001ex36b39o33rnt" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2022/04/18/Spring-Boot-AWS-RDS/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2022/04/18/Spring-Boot-AWS-RDS/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Spring-Boot-with-AWS-S3" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2021/05/16/Spring-Boot-with-AWS-S3/">Spring Boot With AWS S3</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2021/05/16/Spring-Boot-with-AWS-S3/">
            <time datetime="2021-05-16T20:17:01.000Z" itemprop="datePublished">2021-05-16</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/AWS/">AWS</a>, <a class="tag-link" href="/tags/S3/">S3</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>In <a href="https://nirajsonawane.github.io/2021/05/09/Spring-Boot-with-AWS-sqs/">previous post</a> we discuss, How to use spring boot to access AWS SQS service. In this article we will examine how to use Spring boot to access <strong>AWS S3</strong>.</p>
<p><strong>Spring Cloud</strong> provides convenient way to interact with AWS S3 service. With the help of spring cloud S3 support we can use all well-known Spring Boot features. It also offers multiple useful features compare to SDK provided by AWS.</p>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-s3-poc.git" target="_blank" rel="noopener">here</a></strong></p>
<h4 id="Using-Spring-cloud"><a href="#Using-Spring-cloud" class="headerlink" title="Using Spring cloud"></a>Using Spring cloud</h4><figure class="highlight yaml"><figcaption><span>To use S3 support we just need to add below dependancy</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">    <span class="string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line">    <span class="string">&lt;artifactId&gt;spring-cloud-starter-aws&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Providing AWS credential and SDK configurations</strong><br><figure class="highlight yaml"><figcaption><span>In order to make calls to the AWS Services the credentials must be configured for the the Amazon SDK. In order to access S3 service we can configure access key and secret key using yaml or properties files</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">document:</span></span><br><span class="line"><span class="attr">  bucket-name:</span> <span class="string">spring-boot-s3-poc</span></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line"><span class="attr">  aws:</span></span><br><span class="line"><span class="attr">    region:</span></span><br><span class="line"><span class="attr">      static:</span> <span class="string">us-east-1</span></span><br><span class="line"><span class="attr">      auto:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    credentials:</span></span><br><span class="line"><span class="attr">      access-key:</span> <span class="string">XXX</span></span><br><span class="line"><span class="attr">      secret-key:</span> <span class="string">XXXXX</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Creating AmazonS3 Client bean</strong><br><code>AmazonS3 Client</code> bean can be use to perform different operation on AWS S3 service.<br><figure class="highlight java"><figcaption><span>AmazonS3 Client Configuration</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.credentials.access-key&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String awsAccessKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.credentials.secret-key&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String awsSecretKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.region.static&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String region;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AmazonS3 <span class="title">amazonS3Client</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> AmazonS3ClientBuilder</span><br><span class="line">                .standard()</span><br><span class="line">                .withRegion(region)</span><br><span class="line">                .withCredentials(<span class="keyword">new</span> AWSStaticCredentialsProvider(</span><br><span class="line">                        <span class="keyword">new</span> BasicAWSCredentials(awsAccessKey, awsSecretKey)))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Find-all-objects-in-bucket"><a href="#Find-all-objects-in-bucket" class="headerlink" title="Find all objects in bucket"></a>Find all objects in bucket</h3><figure class="highlight java"><figcaption><span>listObjectsV2 method can be use to get all object keys from the bucket</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getAllDocuments</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> amazonS3.listObjectsV2(bucketName).getObjectSummaries().stream()</span><br><span class="line">                .map(S3ObjectSummary::getKey)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Upload-object-to-S3-bucket"><a href="#Upload-object-to-S3-bucket" class="headerlink" title="Upload object to S3 bucket"></a>Upload object to S3 bucket</h3><p>We can  use <code>putObject</code> method on our AmazonS3 client bean to upload object  in S3 bucket. It provides multiple overloaded methods to upload object as File, String, InputStream etc.<br>lets take example of uploading <code>MultipartFile</code> to S3 bucket. </p>
<figure class="highlight java"><figcaption><span>Uploading MultipartFile to S3 bucket</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">uploadDocument</span><span class="params">(@RequestParam(value = <span class="string">"file"</span>)</span> MultipartFile file) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       String tempFileName = UUID.randomUUID() + file.getName();</span><br><span class="line">       File tempFile = <span class="keyword">new</span> File(System.getProperty(<span class="string">"java.io.tmpdir"</span>) + <span class="string">"/"</span> + tempFileName);</span><br><span class="line">       file.transferTo(tempFile); <span class="comment">// Convert multipart file to File</span></span><br><span class="line">       String key UID.randomUUID() + file.getName() <span class="comment">// unique key  for the file</span></span><br><span class="line">       amazonS3.putObject(bucketName, key, tempFile); <span class="comment">// Upload file </span></span><br><span class="line">       tempFile.deleteOnExit(); <span class="comment">//delete temp file </span></span><br><span class="line">       <span class="keyword">return</span> ResponseEntity.created(URI.create(tempFileName)).build();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Download-object-from-S3-bucket"><a href="#Download-object-from-S3-bucket" class="headerlink" title="Download object from S3 bucket"></a>Download object from S3 bucket</h3><p>We can  use <code>getObject</code> method on our AmazonS3 client bean to get object from S3 bucket. <code>getObject</code> returns an <code>S3Object</code><br>which can be converted to ByteArrayResource .<br><figure class="highlight java"><figcaption><span>Download object from S3 bucket</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/&#123;fileName&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;ByteArrayResource&gt; <span class="title">downloadFile</span><span class="params">(@PathVariable String fileName)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        S3Object data = amazonS3.getObject(bucketName, fileName); <span class="comment">// fileName is key which is used while uploading the object </span></span><br><span class="line">        S3ObjectInputStream objectContent = data.getObjectContent();</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = IOUtils.toByteArray(objectContent);</span><br><span class="line">        ByteArrayResource resource = <span class="keyword">new</span> ByteArrayResource(bytes);</span><br><span class="line">        objectContent.close();</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity</span><br><span class="line">                .ok()</span><br><span class="line">                .contentLength(bytes.length)</span><br><span class="line">                .header(<span class="string">"Content-type"</span>, <span class="string">"application/octet-stream"</span>)</span><br><span class="line">                .header(<span class="string">"Content-disposition"</span>, <span class="string">"attachment; filename=\""</span> + fileName + <span class="string">"\""</span>)</span><br><span class="line">                .body(resource);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Deleting-object-from-S3-bucket"><a href="#Deleting-object-from-S3-bucket" class="headerlink" title="Deleting object from S3 bucket"></a>Deleting object from S3 bucket</h3><p>We can  use <code>deleteObject</code> method on our AmazonS3 client bean to delete object from bucket.<br><figure class="highlight java"><figcaption><span>Delete Object</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping</span>(<span class="string">"/&#123;fileName&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">deleteDocument</span><span class="params">(@PathVariable String fileName)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">"Deleting file &#123;&#125;"</span>, fileName); </span><br><span class="line">    amazonS3.deleteObject(bucketName, fileName); <span class="comment">// fileName is key which is used while uploading the object </span></span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok().build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Creating-presigned-url-for-accessing-objects-for-limited-time"><a href="#Creating-presigned-url-for-accessing-objects-for-limited-time" class="headerlink" title="Creating presigned-url for accessing objects for limited time."></a>Creating presigned-url for accessing objects for limited time.</h3><p>We can  use <code>generatePresignedUrl</code> method on our AmazonS3 client bean to generate PresignedUrl which will be valid till provided time.<br><figure class="highlight java"><figcaption><span>get presignedUrl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/presigned-url/&#123;fileName&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">presignedUrl</span><span class="params">(@PathVariable String fileName)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> amazonS3</span><br><span class="line">               .generatePresignedUrl(bucketName, fileName, convertToDateViaInstant(LocalDate.now().plusDays(<span class="number">1</span>)))</span><br><span class="line">               .toString();<span class="comment">// URL will be valid for 24hrs</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>Note:<br>On application startup, you might see exception related to Metadata or RegistryFactoryBean. You need to exclude some auto configuration. You can find more details<br><a href="https://stackoverflow.com/a/67409356/320087" target="_blank" rel="noopener">https://stackoverflow.com/a/67409356/320087</a><br><figure class="highlight yaml"><figcaption><span>exclude autoconfigure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  autoconfigure:</span></span><br><span class="line"><span class="attr">    exclude:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">org.springframework.cloud.aws.autoconfigure.context.ContextInstanceDataAutoConfiguration</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">org.springframework.cloud.aws.autoconfigure.context.ContextRegionProviderAutoConfiguration</span></span><br></pre></td></tr></table></figure></p>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-s3-poc.git" target="_blank" rel="noopener">here</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2021/05/16/Spring-Boot-with-AWS-S3/" data-id="cl250z73f001lx36b2nvcpmzj" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2021/05/16/Spring-Boot-with-AWS-S3/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2021/05/16/Spring-Boot-with-AWS-S3/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Spring-Boot-with-AWS-sqs" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2021/05/09/Spring-Boot-with-AWS-sqs/">Spring Boot With AWS SQS</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2021/05/09/Spring-Boot-with-AWS-sqs/">
            <time datetime="2021-05-09T15:09:52.000Z" itemprop="datePublished">2021-05-09</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/AWS/">AWS</a>, <a class="tag-link" href="/tags/SQS/">SQS</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><strong>Spring Cloud</strong> messaging support provides a convenient way to interact with AWS SQS service, With the help of spring cloud messaging support we can use all well-known Spring Boot features. It also offers multiple useful features compare to SDK provided by AWS.</p>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/aws-sqs-spring-boot-poc.git" target="_blank" rel="noopener">here</a></strong></p>
<h4 id="Create-a-standard-AWS-SQS-queue"><a href="#Create-a-standard-AWS-SQS-queue" class="headerlink" title="Create a standard AWS SQS queue"></a>Create a standard AWS SQS queue</h4><p>Navigate to aws consol -&gt; Simple queue service -&gt; create queue. Then select standard queue and provide name to queue.Click on create queue.<br><img src="/2021/05/09/Spring-Boot-with-AWS-sqs/1.png"></p>
<p><strong>Create IAM Role and IAM Group</strong>, Which will have access to our queue. </p>
<img src="/2021/05/09/Spring-Boot-with-AWS-sqs/3.png">
<img src="/2021/05/09/Spring-Boot-with-AWS-sqs/2.png">
<h4 id="Using-Spring-cloud-messaging"><a href="#Using-Spring-cloud-messaging" class="headerlink" title="Using Spring cloud messaging"></a>Using Spring cloud messaging</h4><figure class="highlight yaml"><figcaption><span>The Spring Cloud AWS messaging module comes as a standalone module and can be imported with the following dependency</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">    <span class="string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line">    <span class="string">&lt;artifactId&gt;spring-cloud-starter-aws-messaging&lt;/artifactId&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Providing AWS credential and SDK configurations</strong><br><figure class="highlight yaml"><figcaption><span>In order to make calls to the AWS Services the credentials must be configured for the the Amazon SDK. In order to access SQS service we can configure access key and secret key using yaml or properties files</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line"><span class="attr">  aws:</span></span><br><span class="line"><span class="attr">    region:</span></span><br><span class="line"><span class="attr">      static:</span> <span class="string">us-east-1</span></span><br><span class="line"><span class="attr">      auto:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    credentials:</span></span><br><span class="line"><span class="attr">      access-key:</span> <span class="string">XXXX</span></span><br><span class="line"><span class="attr">      secret-key:</span> <span class="string">XXXX</span></span><br><span class="line"><span class="attr">    end-point:</span></span><br><span class="line"><span class="attr">      uri:</span> <span class="attr">https://sqs.us-east-1.amazonaws.com/549485575026/spring-boot-poc</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Sending message to SQS.</strong></p>
<p>In order to send messages to SQS queue, Spring boot provides <code>QueueMessagingTemplate</code> which uses <code>AmazonSQSAsync</code><br><figure class="highlight java"><figcaption><span>Configuration for QueueMessagingTemplate</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SQSConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.region.static&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String region;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.credentials.access-key&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String accessKey;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.credentials.secret-key&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String secretKey;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> QueueMessagingTemplate <span class="title">queueMessagingTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> QueueMessagingTemplate(amazonSQSAsync());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AmazonSQSAsync <span class="title">amazonSQSAsync</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> AmazonSQSAsyncClientBuilder.standard().withRegion(Regions.US_EAST_1)</span><br><span class="line">                .withCredentials(<span class="keyword">new</span> AWSStaticCredentialsProvider(<span class="keyword">new</span> BasicAWSCredentials(accessKey, secretKey)))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>QueueMessagingTemplate</code> Provides a convenient method <code>convertAndSend</code> which can be used to send domain objects as message. <code>QueueMessagingTemplate</code> delegate the conversion process to an instance of the MessageConverter interface. This interface defines a simple contract to convert between Java objects and SQS messages.<br><figure class="highlight java"><figcaption><span>Message Publisher</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> QueueMessagingTemplate queueMessagingTemplate;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;cloud.aws.end-point.uri&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="meta">@Scheduled</span>(fixedRate = <span class="number">1000</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleFixedRateTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Sending Message to SQS "</span>);</span><br><span class="line">        <span class="comment">//queueMessagingTemplate.send(endpoint, MessageBuilder.withPayload("Niraj").build());</span></span><br><span class="line">        queueMessagingTemplate.convertAndSend(endpoint, <span class="keyword">new</span> Pojo(<span class="string">"SomeRandomValue"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>   </p>
<p><strong>Consuming Messages from SQS</strong></p>
<p>Spring boot provides a convenient Annotation <code>@SqsListener</code>. In below example a queue listener container is started that polls the spring-boot-poc queue. The incoming messages is converted to the type of method argument, in this case <code>Pojo</code>.</p>
<p>As the <code>deletionPolicy</code> is provided as <code>ON_SUCCESS</code> it means, Message will be Deleted from Queue only when successfully executed by listener method (no exception thrown). We can set the <strong>Global deletion policy</strong>  for all the  queues which are consumed by<br>SqsListener by using property  <code>cloud.aws.sqs.handler.default-deletion-policy=ON_SUCCESS</code><br><figure class="highlight java"><figcaption><span>Message Consumer</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SqsListener</span>(value = <span class="string">"spring-boot-poc"</span>,deletionPolicy = SqsMessageDeletionPolicy.ON_SUCCESS)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">processMessage</span><span class="params">(Pojo message)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Message from SQS &#123;&#125;"</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>   </p>
<p>Note:<br>On application startup, you might see exception related to Metadata or RegistryFactoryBean. You need to exclude some auto configuration. You can find more details<br><a href="https://stackoverflow.com/a/67409356/320087" target="_blank" rel="noopener">https://stackoverflow.com/a/67409356/320087</a><br><figure class="highlight yaml"><figcaption><span>exclude autoconfigure</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  autoconfigure:</span></span><br><span class="line"><span class="attr">    exclude:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">org.springframework.cloud.aws.autoconfigure.context.ContextInstanceDataAutoConfiguration</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">org.springframework.cloud.aws.autoconfigure.context.ContextStackAutoConfiguration</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">org.springframework.cloud.aws.autoconfigure.context.ContextRegionProviderAutoConfiguration</span></span><br></pre></td></tr></table></figure></p>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/aws-sqs-spring-boot-poc.git" target="_blank" rel="noopener">here</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2021/05/09/Spring-Boot-with-AWS-sqs/" data-id="cl250z73e001gx36bvpmjm5nd" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2021/05/09/Spring-Boot-with-AWS-sqs/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2021/05/09/Spring-Boot-with-AWS-sqs/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-spring-boot-with-hibernate-envers" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2021/04/25/spring-boot-with-hibernate-envers/">Spring Boot With Hibernate Envers</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2021/04/25/spring-boot-with-hibernate-envers/">
            <time datetime="2021-04-25T19:30:36.000Z" itemprop="datePublished">2021-04-25</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Hibernate-Envers/">Hibernate Envers</a>, <a class="tag-link" href="/tags/JPA/">JPA</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><strong>Hibernate Envers</strong> provides an easy &amp; flexible way to implement database auditing and versioning. Database Auditing in the context of JPA means tracking and logging the changes on persisted entities. The database audit logs are important from compliance perspectives and also provides grate helps to identify how and what data has been changed. </p>
<p><strong>Hibernate Envers can be integrated very easyly with Spring Boot JPA.</strong> </p>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-hibernate-envers-demo.git" target="_blank" rel="noopener">here</a></strong></p>
<p>To use Envers in Spring boot application, We need to add below dependency.<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">    <span class="string">&lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span></span><br><span class="line">    <span class="string">&lt;artifactId&gt;hibernate-envers&lt;/artifactId&gt;</span></span><br><span class="line">    <span class="string">&lt;version&gt;5.4.30.Final&lt;/version&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>To Audit changes that are performed on an entity, we need to add <strong>@Audited</strong> annotation on the entity.<br><figure class="highlight java"><figcaption><span>Considering we have a UserDetails entity,for which we want to enable Auditing.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Audited</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDetails</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>In order to log all the changes to entity, Envers needs <strong>REVINFO</strong> and  <strong>Entity_aud table</strong>, In  this case it will be USER_DETAILS_AUD.<br>The  REVINFO table contains revision id and revision timestamp. A row is inserted into this table on each new revision, that is, on each commit of a transaction, which changes audited data.<br><figure class="highlight sql"><figcaption><span>flyway migration scripts for the the audit table and revinfo table will look like below.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> REVINFO (</span><br><span class="line">    REV <span class="built_in">INTEGER</span> <span class="keyword">GENERATED</span> <span class="keyword">BY</span> <span class="keyword">DEFAULT</span> <span class="keyword">AS</span> <span class="keyword">IDENTITY</span>,</span><br><span class="line">    REVTSTMP <span class="built_in">BIGINT</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (REV)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> USER_DETAILS (</span><br><span class="line">    USER_ID <span class="built_in">INTEGER</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    FIRST_NAME <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    LAST_NAME <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span></span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> USER_DETAILS_AUD (</span><br><span class="line">    USER_ID <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    FIRST_NAME <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    LAST_NAME <span class="built_in">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">    REV <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    REVTYPE <span class="built_in">INTEGER</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (USER_ID, REV)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>Now when we insert,update and delete UserDetails entity, audit log will be saved in USER_DETAILS_AUD table.  </p>
<figure class="highlight java"><figcaption><span>for below code we should expect 4 rows in USER_DETAILS_AUD table</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dataSetup</span><span class="params">(UserDetailsRepository userRepository)</span> </span>&#123;</span><br><span class="line">    UserDetails userDetails = <span class="keyword">new</span> UserDetails(<span class="number">1</span>, <span class="string">"NIRAJ"</span>, <span class="string">"SONAWANE"</span>);</span><br><span class="line">    userRepository.save(userDetails);  <span class="comment">// Create</span></span><br><span class="line"></span><br><span class="line">    userDetails.setFirstName(<span class="string">"Updated Name"</span>);</span><br><span class="line">    userRepository.save(userDetails); <span class="comment">// Update-1</span></span><br><span class="line"></span><br><span class="line">    userDetails.setLastName(<span class="string">"Updated Last name"</span>); <span class="comment">// Update-2</span></span><br><span class="line">    userRepository.save(userDetails);</span><br><span class="line"></span><br><span class="line">    userRepository.delete(userDetails); <span class="comment">// Delete</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2021/04/25/spring-boot-with-hibernate-envers/1.png">
<p>The <strong>REVTYPE</strong> column value is taken from the <strong>RevisionType</strong> Enum. Which has values<br><strong>0-Add</strong><br><strong>1-Update</strong><br><strong>2-Delete</strong></p>
<p><strong>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-hibernate-envers-demo.git" target="_blank" rel="noopener">here</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2021/04/25/spring-boot-with-hibernate-envers/" data-id="cl250z73j001rx36bva1d9d28" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2021/04/25/spring-boot-with-hibernate-envers/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2021/04/25/spring-boot-with-hibernate-envers/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Contract-Testing-Using-Spring-Cloud-Contract" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/">Consumer Driven Contract Test Using Spring Cloud Contract</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/">
            <time datetime="2021-02-20T20:00:29.000Z" itemprop="datePublished">2021-02-20</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Contract-Testing/">Contract Testing</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Cloud-Contract/">Spring Cloud Contract</a>, <a class="tag-link" href="/tags/pact/">pact</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/cdct.jpg">
<p><span>Photo by <a href="https://unsplash.com/@beatriz_perez?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener">Beatriz Prez Moya</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" target="_blank" rel="noopener">Unsplash</a></span></p>
<p>This post discusses, What is Consumer Driven Contract test? and How to implement it using Spring Cloud Contract.</p>
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/consumer-driven-contract-testing-demo" target="_blank" rel="noopener">here</a></p>
<h3 id="Contract-Testing"><a href="#Contract-Testing" class="headerlink" title="Contract Testing"></a>Contract Testing</h3><p>Contract test are set of automated test, That verifies two separate services are adhering to predefine contracts and are compatible with each other.<br>Aim of contract test is to make sure that, Contract are always kept up to date and each service ( Provider &amp; Consumer) can be tested independently.</p>
<h3 id="Consumer-Driven-Contract-test"><a href="#Consumer-Driven-Contract-test" class="headerlink" title="Consumer Driven Contract test"></a>Consumer Driven Contract test</h3><p>In consumer driven contract testing, Consumers are responsible for providing the contract details. In this strategy consumers of API are at the heart of API design process.In consumer driven API design process providers are forced to complete their consumer obligations. Frameworks like pact and Spring Cloud Contracts provides set of tools to implement Consumer Driven Contract test.</p>
<h3 id="Spring-Cloud-Contract"><a href="#Spring-Cloud-Contract" class="headerlink" title="Spring Cloud Contract"></a>Spring Cloud Contract</h3><p>Spring Cloud Contract provides set of tool for implementing Consumer Driven Contract test for Spring based applications. It has two major component Contract Verifier for Producers &amp; Stub Runner for consumer</p>
<h3 id="Sample-application"><a href="#Sample-application" class="headerlink" title="Sample application"></a>Sample application</h3><p>Lets write some contract test. Assume we got an requirement from <strong>Consumer application Service-A</strong>  for status API for <strong>Provider  application Service-B</strong>, Which will provide Current Status of user.</p>
<p>In consumer driven contract strategy, as consumer of service, consumers need to define what exactly they want from producer in the form of written contracts. You can provide contract in groovy or yaml format</p>
<h4 id="Provider-Service-B"><a href="#Provider-Service-B" class="headerlink" title="Provider : Service-B"></a>Provider : Service-B</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.cloud.contract.spec.Contract</span><br><span class="line">Contract.make &#123;</span><br><span class="line">    description <span class="string">"should return user status"</span></span><br><span class="line"></span><br><span class="line">    request &#123;</span><br><span class="line">        url <span class="string">"/status"</span></span><br><span class="line">        method GET()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    response &#123;</span><br><span class="line">        status OK()</span><br><span class="line">        headers &#123;</span><br><span class="line">            contentType applicationJson()</span><br><span class="line">        &#125;</span><br><span class="line">        body (</span><br><span class="line"><span class="symbol">                id:</span> <span class="number">1</span>,</span><br><span class="line"><span class="symbol">                status:</span> <span class="string">"CREATED"</span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><figcaption><span>Implement Contract</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserStatusController</span></span>(<span class="keyword">private</span> <span class="keyword">val</span> userStatusService: UserStatusService) &#123;</span><br><span class="line">    <span class="meta">@GetMapping(<span class="meta-string">"/status"</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getStatus</span><span class="params">()</span></span>: ResponseEntity&lt;UserStatus&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(userStatusService.getUserStatus(<span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">UserStatus</span></span>(<span class="keyword">val</span> id: <span class="built_in">Int</span>, <span class="keyword">val</span> status: String)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserStatusService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getUserStatus</span><span class="params">(userId:<span class="type">Int</span>)</span></span>:UserStatus&#123;</span><br><span class="line">        <span class="keyword">return</span> UserStatus(<span class="number">1</span>,<span class="string">"ACTIVATED"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>How to verify contracts ?</strong><br><code>spring-cloud-starter-contract-verifier</code> helps us to automatically verify the contracts, Its generates the test cases during the build phase and verify the API response against the contract. Add below dependency in pom </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">	<span class="string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line">	<span class="string">&lt;artifactId&gt;spring-cloud-starter-contract-verifier&lt;/artifactId&gt;</span></span><br><span class="line">	<span class="string">&lt;scope&gt;test&lt;/scope&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure>
<p>To auto-generated tests classes, Add below plugin inside build tag.<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;plugin&gt;</span></span><br><span class="line">    <span class="string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line">    <span class="string">&lt;artifactId&gt;spring-cloud-contract-maven-plugin&lt;/artifactId&gt;</span></span><br><span class="line">    <span class="string">&lt;version&gt;3.0.1&lt;/version&gt;</span></span><br><span class="line">    <span class="string">&lt;extensions&gt;true&lt;/extensions&gt;</span></span><br><span class="line">    <span class="string">&lt;configuration&gt;</span></span><br><span class="line">        <span class="string">&lt;testFramework&gt;JUNIT5&lt;/testFramework&gt;</span></span><br><span class="line">        <span class="string">&lt;baseClassForTests&gt;com.ns.producer.BaseClass&lt;/baseClassForTests&gt;</span></span><br><span class="line">    <span class="string">&lt;/configuration&gt;</span></span><br><span class="line"><span class="string">&lt;/plugin&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>We also need to provide <strong>BaseClassForTest</strong>, which will be extended by all generated classes. Base class is responsible for providing all needed mocking &amp; spring beans needed for the generated test classes.In out cases this is how base class will look like.</p>
<figure class="highlight java"><figcaption><span>BaseClass</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span>(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserStatusController userStatusController;</span><br><span class="line">    <span class="meta">@MockBean</span></span><br><span class="line">    <span class="keyword">private</span> UserStatusService userStatusService;</span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Mockito.when(userStatusService.getUserStatus(<span class="number">1</span>)).thenReturn(<span class="keyword">new</span> UserStatus(<span class="number">1</span>, <span class="string">"CREATED"</span>));</span><br><span class="line">        RestAssuredMockMvc.standaloneSetup(userStatusController);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now if we run the build, <code>ContractVerifierTest</code> test class will be generated inside /target/generated-test-source/contract  generated class will be look like below </p>
<figure class="highlight java"><figcaption><span>Generated Test Class</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContractVerifierTest</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">validate_get_status_by_id</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// given:</span></span><br><span class="line">			MockMvcRequestSpecification request = given();</span><br><span class="line">		<span class="comment">// when:</span></span><br><span class="line">			ResponseOptions response = given().spec(request)</span><br><span class="line">					.get(<span class="string">"/status"</span>);</span><br><span class="line">		<span class="comment">// then:</span></span><br><span class="line">			assertThat(response.statusCode()).isEqualTo(<span class="number">200</span>);</span><br><span class="line">			assertThat(response.header(<span class="string">"Content-Type"</span>)).matches(<span class="string">"application/json.*"</span>);</span><br><span class="line">		<span class="comment">// and:</span></span><br><span class="line">			DocumentContext parsedJson = JsonPath.parse(response.getBody().asString());</span><br><span class="line">			assertThatJson(parsedJson).field(<span class="string">"['id']"</span>).isEqualTo(<span class="number">1</span>);</span><br><span class="line">			assertThatJson(parsedJson).field(<span class="string">"['status']"</span>).isEqualTo(<span class="string">"CREATED"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Consumer-Service-A"><a href="#Consumer-Service-A" class="headerlink" title="Consumer : Service-A"></a>Consumer : Service-A</h4><p>On the consumer side , We can use stub generated by Producer application to test the interaction from consumer to producer.To use stub generated by producer add below dependancy in consumer</p>
<figure class="highlight yaml"><figcaption><span>pom</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span></span><br><span class="line">    <span class="string">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span></span><br><span class="line">    <span class="string">&lt;artifactId&gt;spring-cloud-starter-contract-stub-runner&lt;/artifactId&gt;</span></span><br><span class="line">    <span class="string">&lt;scope&gt;test&lt;/scope&gt;</span></span><br><span class="line"><span class="string">&lt;/dependency&gt;</span></span><br></pre></td></tr></table></figure>
<p>the Unit test to test  interaction with Producer will look like below<br><figure class="highlight java"><figcaption><span>pom</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StatusServiceTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    lateinit var underTest: StatusService</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JvmField</span></span><br><span class="line">    <span class="meta">@RegisterExtension</span></span><br><span class="line">    <span class="keyword">final</span> val stubRunner = StubRunnerExtension()</span><br><span class="line">        .downloadStub(<span class="string">"com.ns"</span>, <span class="string">"producer"</span>, <span class="string">"0.0.1-SNAPSHOT"</span>, <span class="string">"stubs"</span>)</span><br><span class="line">        .withPort(<span class="number">8080</span>)</span><br><span class="line">        .stubsMode(StubRunnerProperties.StubsMode.LOCAL)</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function">fun <span class="title">getStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        val status = underTest.getStatus()</span><br><span class="line">        assertEquals(status, <span class="string">"CREATED"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function">fun <span class="title">getPactStatus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        val status = underTest.getPactStatus()</span><br><span class="line">        assertEquals(status, <span class="string">"CREATED"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/consumer-driven-contract-testing-demo" target="_blank" rel="noopener">here</a></p>
<p>Reference <a href="https://docs.spring.io/spring-cloud-contract/docs/current/reference/html/index.html" target="_blank" rel="noopener">Spring Cloud Contract Reference Documentation</a>  </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/" data-id="cl250z72y000ix36btp5yve5d" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/">Monitoring Spring Boot Application with Prometheus and Grafana on Kubernetes</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/">
            <time datetime="2020-05-17T17:37:36.000Z" itemprop="datePublished">2020-05-17</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Grafana/">Grafana</a>, <a class="tag-link" href="/tags/Helm/">Helm</a>, <a class="tag-link" href="/tags/Prometheus/">Prometheus</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/kubernetes/">kubernetes</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/helm.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@kmuza?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Carlos Muza"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Carlos Muza</span></a></p>
<p>Welcome to the second post on Prometheus &amp; Grafana. In last post <a href="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/" title="Monitoring Spring Boot Application with Prometheus and Grafana">Monitoring Spring Boot Application with Prometheus and Grafana</a> we Integrated <strong>Prometheus</strong> , <strong>Spring Boot</strong> and <strong>Grafana</strong> using docker. </p>
<p>In this post we will discuss, How to setup <strong>Prometheus</strong> and <strong>Grafana</strong> on <strong>Kubernetes</strong> using <strong>Helm Charts</strong></p>
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-prometheus-grafana-kubernetes" target="_blank" rel="noopener">here</a></p>
<p>If youre new to Kubernetes &amp; Prometheus I recommend reading the following hands-on guide on Kubernetes.</p>
<ol>
<li><a href="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/" title="Deploy React, Spring Boot & MongoDB Fullstack application on Kubernetes">Deploy React, Spring Boot & MongoDB Fullstack application on Kubernetes</a></li>
<li><a href="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/" title="Monitoring Spring Boot Application with Prometheus and Grafana">Monitoring Spring Boot Application with Prometheus and Grafana</a>
</li>
</ol>
<h4 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h4><p>You need to have <a href="https://kubernetes.io/docs/reference/kubectl/kubectl/" target="_blank" rel="noopener">Kubectl</a>, <a href="https://helm.sh/" target="_blank" rel="noopener">Helm</a>, <a href="https://kubernetes.io/docs/tutorials/hello-minikube/" target="_blank" rel="noopener">Minikube</a> installed on your machine. To Follow along this post, Basic knowledge of Kubernetes is needed.</p>
<h4 id="Step-1-Deploy-a-Spring-Boot-application-on-Kubernetes-and-expose-actuator-endpoints"><a href="#Step-1-Deploy-a-Spring-Boot-application-on-Kubernetes-and-expose-actuator-endpoints" class="headerlink" title="Step 1 : Deploy a Spring Boot application on Kubernetes and expose actuator endpoints"></a>Step 1 : Deploy a Spring Boot application on Kubernetes and expose actuator endpoints</h4><ol>
<li>How to deploy Spring boot application on Kubernetes is explained in detail <a href="https://nirajsonawane.github.io/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/">here</a> </li>
<li>How to expose actuator endpoints for Prometheus is explained <a href="https://nirajsonawane.github.io/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/">here</a>. </li>
</ol>
<p>In Kubernetes environment , we can configure <strong>annotations</strong> which will be used by prometheus to scrap data.Below is the complete deployment.yaml file</p>
<figure class="highlight yaml"><figcaption><span>spring-boot-prometheus-deployment.yaml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">spring-boot-prometheus</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">spring-boot-prometheus</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">spring-boot-prometheus</span></span><br><span class="line"><span class="attr">      annotations:</span></span><br><span class="line">        <span class="string">prometheus.io/scrape:</span> <span class="string">"true"</span></span><br><span class="line">        <span class="string">prometheus.io/port:</span> <span class="string">"8080"</span></span><br><span class="line">        <span class="string">prometheus.io/path:</span> <span class="string">"/actuator/prometheus"</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">spring-boot-prometheus</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">nirajsonawane/spring-boot-prometheus:0.0.1-SNAPSHOT</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">          resources:</span></span><br><span class="line"><span class="attr">            limits:</span></span><br><span class="line"><span class="attr">              memory:</span> <span class="number">294</span><span class="string">Mi</span></span><br></pre></td></tr></table></figure>
<h4 id="Step-2-Create-separate-namespace-for-Monitoring"><a href="#Step-2-Create-separate-namespace-for-Monitoring" class="headerlink" title="Step 2 : Create separate namespace for Monitoring"></a>Step 2 : Create separate namespace for Monitoring</h4><p>its always good idea to keep related things together, We will create separate namespace in Kubernetes for monitoring and will deploy all monitoring related application under that namespace.<br><figure class="highlight yaml"><figcaption><span>namespace.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">monitoring</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Helm-Chart"><a href="#Helm-Chart" class="headerlink" title="Helm Chart"></a>Helm Chart</h4><p>Helm uses a packaging format called charts. A chart is a collection of files that describe a related set of Kubernetes resources. A single chart might be used to deploy something simple, like a memcached pod, or something complex, like a full web app stack with HTTP servers, databases, caches, and so on.<br>Charts are created as files laid out in a particular directory tree, then they can be packaged into versioned archives to be deployed.</p>
<h4 id="Step-3-Deploy-Prometheus-using-Helm-Chart"><a href="#Step-3-Deploy-Prometheus-using-Helm-Chart" class="headerlink" title="Step 3: Deploy Prometheus using Helm Chart"></a>Step 3: Deploy Prometheus using Helm Chart</h4><p>With the help of Helm,  We can deploy prometheus using single command.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">helm install prometheus stable/prometheus --namespace monitoring</span><br></pre></td></tr></table></figure><br>This will deploy Prometheus into your cluster in the monitoring namespace and mark the release with the name prometheus.</p>
<img src="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/prometheus.PNG">
<p>lets check if prometheus is running or not<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods -n monitoring </span><br></pre></td></tr></table></figure><br><img src="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/prometheus-get.PNG"></p>
<h4 id="Step-4-Deploy-Grafana-using-Helm-Chart"><a href="#Step-4-Deploy-Grafana-using-Helm-Chart" class="headerlink" title="Step 4: Deploy Grafana using Helm Chart"></a>Step 4: Deploy Grafana using Helm Chart</h4><p>In Previous post we have manually created the data sources. Here we can create the  <strong>config map for Prometheus data source</strong> and   grafana deployment can use these config maps.</p>
<p>After Grafana Helm chart deployment, it looks for any config maps that contain a grafana_datasource label.</p>
<figure class="highlight yaml"><figcaption><span>config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">prometheus-grafana-datasource</span></span><br><span class="line"><span class="attr">  namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="attr">  labels:</span></span><br><span class="line"><span class="attr">    grafana_datasource:</span> <span class="string">'1'</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="string">datasource.yaml:</span> <span class="string">|-</span></span><br><span class="line"><span class="attr">    apiVersion:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">    datasources:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">Prometheus</span></span><br><span class="line"><span class="attr">      type:</span> <span class="string">prometheus</span></span><br><span class="line"><span class="attr">      access:</span> <span class="string">proxy</span></span><br><span class="line"><span class="attr">      orgId:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">      url:</span> <span class="attr">http://prometheus-server.monitoring.svc.cluster.local</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><figcaption><span>values.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sidecar:</span></span><br><span class="line"><span class="attr">  image:</span> <span class="string">xuxinkun/k8s-sidecar:0.0.7</span></span><br><span class="line"><span class="attr">  imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"><span class="attr">  datasources:</span></span><br><span class="line"><span class="attr">    enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    label:</span> <span class="string">grafana_datasource</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>Config map & Grafana deployment</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f helm/monitoring/grafana/config.yml </span><br><span class="line">helm install grafana stable/grafana -f helm/monitoring/grafana/values.yml --namespace monitoring  </span><br></pre></td></tr></table></figure>
<img src="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/graphana.PNG">
<p>Password protected Grafana instance will be be deployed, To know the password run the below command.<br><figure class="highlight plain"><figcaption><span>print password</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get secret --namespace monitoring grafana -o jsonpath=&quot;&#123;.data.admin-password&#125;&quot; | base64 --decode ; echo</span><br></pre></td></tr></table></figure><br>Now lets do port-forward for accessing grafana<br><figure class="highlight plain"><figcaption><span>port-forward deployment</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl --namespace monitoring port-forward grafana-5c6bbf7f4c-n5pqb 3000</span><br></pre></td></tr></table></figure></p>
<p>Now if you goto <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> grafana interface will be available.<br><img src="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/graphana-web.PNG"></p>
<p>Now lets add JVM chart which wil be using our Prometheus datasource.<br><img src="/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/graphana-JVM.PNG"></p>
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-prometheus-grafana-kubernetes" target="_blank" rel="noopener">here</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/" data-id="cl250z736000zx36bydshz4ty" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2020/05/17/Monitoring-Spring-Boot-Application-with-Prometheus-and-Grafana-on-Kubernetes/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-monitoring-spring-boot-application-with-prometheus-and-grafana" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/">Monitoring Spring Boot Application with Prometheus and Grafana</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/">
            <time datetime="2020-05-03T14:49:18.000Z" itemprop="datePublished">2020-05-03</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Grafana/">Grafana</a>, <a class="tag-link" href="/tags/Prometheus/">Prometheus</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/carlos.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@kmuza?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Carlos Muza"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Carlos Muza</span></a></p>
<p>In this post we will discuss how to integrate <strong>Prometheus</strong> monitoring system with <strong>Spring Boot</strong> and <strong>Grafana</strong>. </p>
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-prometheus-grafana-kubernetes" target="_blank" rel="noopener">here</a></p>
<p>This setup has three major components. </p>
<h2 id="Spring-Boot-and-Micrometer"><a href="#Spring-Boot-and-Micrometer" class="headerlink" title="Spring Boot and Micrometer"></a>Spring Boot and Micrometer</h2><p>Spring Boot Actuator provides number of features to help us monitor and manage spring boot application. Spring Boot Actuator also provides dependency management and auto-configuration for Micrometer.</p>
<p><a href="https://micrometer.io/" target="_blank" rel="noopener"><strong>Micrometer</strong></a> is an application metrics facade that supports numerous monitoring systems.<br>To integrate Prometheus with spring boot we just need to add  <code>micrometer-registry-prometheus</code> dependancy in class path.Once spring boot detects this dependancy it will expose <code>/actuator/prometheus</code> endpoint.</p>
<figure class="highlight xml"><figcaption><span>pom File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micrometer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> Along with this dependancy we need to set below property.<br> <figure class="highlight xml"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">management.endpoints.web.exposure.include=health,info,metrics,prometheus</span><br></pre></td></tr></table></figure></p>
<p>Now if we run the application and check <a href="http://localhost:8080/actuator/prometheus" target="_blank" rel="noopener">http://localhost:8080/actuator/prometheus</a></p>
<img src="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/prometheus.PNG">
<h2 id="Prometheus"><a href="#Prometheus" class="headerlink" title="Prometheus"></a>Prometheus</h2><p><a href="https://prometheus.io/" target="_blank" rel="noopener">Prometheus</a> is an open-source monitoring and alerting toolkit originally built at SoundCloud.<br>Prometheus does one thing and it does it well. It has a simple yet powerful data model and a query language that lets you analyse how your applications and infrastructure are performing. </p>
<p>Prometheus has a <strong>data scraper</strong> that pulls metrics data over HTTP periodically at a configured interval. It stores metric data in <strong>A time-series Database</strong>. It has simple user interface that can be used to run query and visualize data. It also has powerful <strong>Altering system.</strong></p>
<p>lets try to run Prometheus on docker.<br>We need to configure  <code>Prometheus</code> to scrape our spring boot application.<br><figure class="highlight yml"><figcaption><span>prometheus.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line"><span class="attr">  scrape_interval:</span> <span class="number">10</span><span class="string">s</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line"><span class="attr">  - job_name:</span> <span class="string">'spring_micrometer'</span></span><br><span class="line"><span class="attr">    metrics_path:</span> <span class="string">'/actuator/prometheus'</span></span><br><span class="line"><span class="attr">    scrape_interval:</span> <span class="number">5</span><span class="string">s</span></span><br><span class="line"><span class="attr">    static_configs:</span></span><br><span class="line"><span class="attr">      - targets:</span> <span class="string">['YOUR-MACHINE-IP:8080']</span></span><br></pre></td></tr></table></figure></p>
<p>configuration is very much self explanatory. We have created job spring_micrometer for scraping our spring boot application and provided the endpoint where prometheus can get the data. As we are runing Prometheus from docker in targets we need to provide IP of local machine.</p>
<p><strong>Run Prometheus on docker</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9090:9090 -v &lt;File path of prometheus.yml&gt;:/etc/prometheus/prometheus.yml prom/prometheus</span><br></pre></td></tr></table></figure></p>
<p>Now if you goto <a href="http://localhost:9090/targets" target="_blank" rel="noopener">http://localhost:9090/targets</a>  it should show our spring boot application.</p>
<img src="/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/targets.PNG">
<h2 id="Grafana"><a href="#Grafana" class="headerlink" title="Grafana"></a>Grafana</h2><p><a href="https://grafana.com/" target="_blank" rel="noopener">Grafana</a> is open source visualization and analytics software. It allows you to query, visualize, alert on, and explore your metrics no matter where they are stored. It provides you with tools to turn your time-series database (TSDB) data into beautiful graphs and visualizations.</p>
<p><strong>Grafana supports querying Prometheus from very initial version</strong></p>
<p>lets try to setup grafana using docker. </p>
<figure class="highlight plain"><figcaption><span>docker run</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3000:3000 grafana/grafana </span><br></pre></td></tr></table></figure>
<p>Now if you goto <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> grafana interface will be available. Default username password is <strong>admin/admin</strong>.<br>you can add Prometheus data source and dashboard by following below steps.  </p>
 <video width="700" height="700" controls autoplay><br>  <source src="/asset/add-datasource.webm" type="video/webm"><br>Your browser does not support the video tag.<br></video> 

<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/spring-boot-prometheus-grafana-kubernetes" target="_blank" rel="noopener">here</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/" data-id="cl250z73h001qx36b6y3mrdx8" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2020/05/03/monitoring-spring-boot-application-with-prometheus-and-grafana/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/">Deploy React, Spring Boot &amp; MongoDB Fullstack application on Kubernetes</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/">
            <time datetime="2020-04-25T20:21:19.000Z" itemprop="datePublished">2020-04-25</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Kubernetes/">Kubernetes</a>, <a class="tag-link" href="/tags/Minikube/">Minikube</a>, <a class="tag-link" href="/tags/MongoDB/">MongoDB</a>, <a class="tag-link" href="/tags/React/">React</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/keith-misner-h0Vxgz5tyXA-unsplash.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@keithmisner?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Keith Misner"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Keith Misner</span></a></p>
<p>In this post we will discuss how to Deploy Full stack application on <strong>Kubernetes</strong>. We will build small Student CRUD application using <strong>React</strong>  as Front end, <strong>Spring Boot</strong> as back end and <strong>MongoDB</strong> as persistance layer and we also configure <strong>PersistentVolumeClaim</strong>.</p>
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/kubernetes-full-stack-example.git" target="_blank" rel="noopener">here</a></p>
<h4 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h4><p>To Follow along this post, You need to have <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/" target="_blank" rel="noopener">minikube</a> and <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener">kubectl</a> installed on your system. Basic knowledge of Docker,Kubernetes &amp; Spring Boot is needed. </p>
<p>The sample application that we will be deploying on Kubernetes allows user to perform CRUD operations and the final deployment structure will be below.<br><img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/student-app.jpg"></p>
<p>lets start </p>
<h4 id="Step-1-Deploy-a-React-application-on-Kubernetes"><a href="#Step-1-Deploy-a-React-application-on-Kubernetes" class="headerlink" title="Step 1 : Deploy a React application on Kubernetes"></a>Step 1 : Deploy a React application on Kubernetes</h4><p>The React app is created by <code>create-react-app</code> and then docker image is available on Ducker hub. You can also this image to follow along <code>docker pull nirajsonawane/student-app-client</code></p>
<p><strong>Deployment configuration</strong><br><figure class="highlight yaml"><figcaption><span>student-app-client-deployment File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">student-app-client</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">student-app-client</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">student-app-client</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">student-app-client</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">nirajsonawane/student-app-client</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure></p>
<p><strong><a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener">Deployments</a></strong> in Kubernetes is declarative way of creating and updating pods. In above configurations we created <code>student-app-client</code> deployment indicated by <code>name</code>, with 1 number of replicas. The containers sections provides details about Which &amp; How the  containers should get created. </p>
<p><strong>Service configuration</strong><br><figure class="highlight yaml"><figcaption><span>student-app-client-service File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">student-app-client-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">student-app-client</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">      protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">ClusterIP</span></span><br></pre></td></tr></table></figure><br><strong><a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank" rel="noopener">Service</a></strong> in Kubernetes is way to expose application running on a set of Pods (Deployments) as network service. The above configurations creates a new Service object named <code>student-app-client-service</code>, which targets TCP port 80 on any Pod with the <code>app=student-app-client label.</code> Kubernetes ServiceTypes allow you to specify what kind of Service you want. The default is ClusterIP. Please Check the documentation for more details.</p>
<p>lets deploy it on our local Kubernetes cluster<br><strong>Start minikube</strong> <code>minikube start</code></p>
<img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/minikube-start.PNG">
<p><strong>Check  minikube status</strong> <code>minikube status</code></p>
<img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/minikube-status.PNG">
<p><strong>Apply deployment and service for client</strong> <code>kubectl apply -f &lt;file-name.yaml&gt;</code></p>
<img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/getAll.PNG">
<p><strong>Tip:</strong> If you want to check if client pod is getting correctly deployed and want to access URL, Change the service type to <code>NodePort</code> and then run<br><code>minikube service student-app-client-service</code>  </p>
<h4 id="Step-2-Deploy-MongoDB-persistance-layer-on-Kubernetes"><a href="#Step-2-Deploy-MongoDB-persistance-layer-on-Kubernetes" class="headerlink" title="Step 2 : Deploy MongoDB persistance layer on Kubernetes"></a>Step 2 : Deploy MongoDB persistance layer on Kubernetes</h4><p>For Managing storage Kubernetes <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener">PersistentVolume subsystem</a> provides API which defines <em>how storage is provided</em> and <em>how it is consumed.</em> For this we need to create two kubernetes resources</p>
<p><strong>A PersistentVolume (PV)</strong> is a piece of storage in the cluster that has been provisioned by an administrator or dynamically provisioned using Storage Classes.<br> lifecycle of PV is independent of any individual Pod that uses the PV. In simple words PV are user-provisioned storage volumes assigned to a Kubernetes cluster.</p>
<p><strong>A PersistentVolumeClaim (PVC)</strong>  is a request for storage by a user that deployment needs. It is similar to a Pod. Pods consume node resources and PVCs consume PV resources.</p>
<p>In order to deploy the the database component we need to define below resource configurations :</p>
<ol>
<li>PersistentVolumeClaim</li>
<li>Deployment</li>
<li>Service</li>
</ol>
<p><strong>PersistentVolumeClaim</strong><br><figure class="highlight yaml"><figcaption><span>PersistentVolumeClaim config File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">mongo-pvc</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  accessModes:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">ReadWriteOnce</span></span><br><span class="line"><span class="attr">  resources:</span></span><br><span class="line"><span class="attr">    requests:</span></span><br><span class="line"><span class="attr">      storage:</span> <span class="number">256</span><span class="string">Mi</span></span><br></pre></td></tr></table></figure><br>The access modes are:<br>ReadWriteOnce  the volume can be mounted as read-write by a single node<br>ReadOnlyMany  the volume can be mounted read-only by many nodes<br>ReadWriteMany  the volume can be mounted as read-write by many nodes</p>
<p><strong>Deployment</strong><br><figure class="highlight yaml"><figcaption><span>Deployment Config File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">          image:</span> <span class="attr">mongo:3.6.17-xenial</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">27017</span></span><br><span class="line"><span class="attr">          volumeMounts:</span></span><br><span class="line"><span class="attr">            - name:</span> <span class="string">storage</span></span><br><span class="line"><span class="attr">              mountPath:</span> <span class="string">/data/db</span></span><br><span class="line"><span class="attr">      volumes:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">storage</span></span><br><span class="line"><span class="attr">          persistentVolumeClaim:</span></span><br><span class="line"><span class="attr">            claimName:</span> <span class="string">mongo-pvc</span></span><br></pre></td></tr></table></figure><br>Deployment is requesting volume defined by claim Name <code>mongo-pvc</code> </p>
<p><strong>Service</strong><br><figure class="highlight yaml"><figcaption><span>Service Config File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">mongo</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">27017</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">27017</span></span><br></pre></td></tr></table></figure></p>
<p>lets apply all these new configurations.<br><strong>Apply PersistentVolumeClaim , deployment and service for MongoDB</strong> <code>kubectl apply -f &lt;file-name.yaml&gt;</code><br><img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/mongo.PNG"> </p>
<h4 id="Step-3-Deploy-Spring-Boot-Backend-API-on-Kubernetes"><a href="#Step-3-Deploy-Spring-Boot-Backend-API-on-Kubernetes" class="headerlink" title="Step 3 : Deploy Spring Boot Backend API on Kubernetes"></a>Step 3 : Deploy Spring Boot Backend API on Kubernetes</h4><p>Our Backend api is simple spring boot application and it is using doing CRUD using <code>MongoRepository</code> complete code is available on Github <a href="https://github.com/nirajsonawane/kubernetes-full-stack-example.git" target="_blank" rel="noopener">here</a>  </p>
<p>Spring boot app is dockerized and docker image is available  docker hub. <code>docker pull nirajsonawane/student-app-api:0.0.1-SNAPSHOT</code><br><strong>Deployment</strong><br><figure class="highlight yaml"><figcaption><span>API Deployment Config File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    matchLabels:</span></span><br><span class="line"><span class="attr">      app:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">  replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">  template:</span></span><br><span class="line"><span class="attr">    metadata:</span></span><br><span class="line"><span class="attr">      labels:</span></span><br><span class="line"><span class="attr">        app:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">    spec:</span></span><br><span class="line"><span class="attr">      containers:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">          image:</span> <span class="string">nirajsonawane/student-app-api:0.0.1-SNAPSHOT</span></span><br><span class="line"><span class="attr">          imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line"><span class="attr">          ports:</span></span><br><span class="line"><span class="attr">            - containerPort:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">          env:</span></span><br><span class="line"><span class="attr">            - name:</span> <span class="string">MONGO_URL</span></span><br><span class="line"><span class="attr">              value:</span> <span class="attr">mongodb://mongo:27017/dev</span></span><br></pre></td></tr></table></figure><br>in above yaml file The <code>env:</code> is used to define environment variables for the POD. Our API expects MONGO_URL for configuration of <code>spring.data.mongodb.uri</code><br><figure class="highlight plain"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.data.mongodb.uri=$&#123;MONGO_URL:mongodb://localhost:27017/dev&#125;</span><br></pre></td></tr></table></figure><br>Now lets talk about MONGO_URL.</p>
<p>mongodb url is configured like <code>mongodb://someHost:27017/dev</code> so what is <code>mongo</code> in our url?  <code>mongo</code> is name defined in service config file of mongo.<br>Pods within a cluster can talk to each other through the names of the Services exposing them.</p>
<p><strong>Service</strong><br><figure class="highlight yaml"><figcaption><span>Service Config File for API</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  selector:</span></span><br><span class="line"><span class="attr">    app:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">  ports:</span></span><br><span class="line"><span class="attr">    - port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">      protocol:</span> <span class="string">TCP</span></span><br><span class="line"><span class="attr">      targetPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><br><strong>Apply deployment and service for API</strong> <code>kubectl apply -f &lt;file-name.yaml&gt;</code><br><img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/api.PNG"></p>
<h4 id="Step-4-Deploy-Ingress-and-connect-frontend-to-backend"><a href="#Step-4-Deploy-Ingress-and-connect-frontend-to-backend" class="headerlink" title="Step 4 : Deploy Ingress and connect frontend to backend"></a>Step 4 : Deploy Ingress and connect frontend to backend</h4><p><a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" rel="noopener">Ingress</a> is an API object that manages external access to the services in a cluster.</p>
<figure class="highlight yaml"><figcaption><span>Ingress Resource</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1beta1</span> <span class="comment"># for versions before 1.14 use extensions/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">student-app-ingress</span></span><br><span class="line"><span class="attr">  annotations:</span></span><br><span class="line">    <span class="string">nginx.ingress.kubernetes.io/rewrite-target:</span> <span class="string">/$1</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"><span class="attr">  rules:</span></span><br><span class="line"><span class="attr">  - http:</span></span><br><span class="line"><span class="attr">      paths:</span></span><br><span class="line"><span class="attr">        - path:</span> <span class="string">/?(.*)</span></span><br><span class="line"><span class="attr">          backend:</span></span><br><span class="line"><span class="attr">            serviceName:</span> <span class="string">student-app-client-service</span></span><br><span class="line"><span class="attr">            servicePort:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">        - path:</span> <span class="string">/api/?(.*)</span></span><br><span class="line"><span class="attr">          backend:</span></span><br><span class="line"><span class="attr">            serviceName:</span> <span class="string">student-app-api</span></span><br><span class="line"><span class="attr">            servicePort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure>
<p>We can define different HTTP rule in ingress configuration. For our application we have configured two rules in <code>backend</code> section. A backend is a combination of Service and port names as described in the Service doc. HTTP (and HTTPS) requests to the Ingress that matches the host and path of the rule are sent to the listed backend.</p>
<p><strong>Note</strong> While making call to backend API from react client we are prefixing request with <code>api</code> and then redirecting request to <code>student-app-api</code> thro our Ingress. We can also use service-name for direct making call to backend api.</p>
<p>lets deploy the final resource.<br>Fist we need to enable ingress by running <code>minikube addons enable ingress</code> and then kubectl apply -f student-app-ingress.yaml</p>
<img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/getIP.PNG">
<p>lets try to access the application from minikube ip</p>
<img src="/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/client.PNG">
<p>The code for this post is available on Github <a href="https://github.com/nirajsonawane/kubernetes-full-stack-example.git" target="_blank" rel="noopener">here</a>  </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/" data-id="cl250z72w000fx36b0puif9f2" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2020/04/25/Deploy-React-Spring-Boot-MongoDB-Fullstack-application-on-Kubernetes/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Project-Reactor-Part-3-Error-Handling" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2020/01/04/Project-Reactor-Part-3-Error-Handling/">Project Reactor [Part 3]  Error Handling</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2020/01/04/Project-Reactor-Part-3-Error-Handling/">
            <time datetime="2020-01-04T16:18:19.000Z" itemprop="datePublished">2020-01-04</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Project-Reactor/">Project Reactor</a>, <a class="tag-link" href="/tags/Reactive-Programming/">Reactive Programming</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/WebFlux/">WebFlux</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2020/01/04/Project-Reactor-Part-3-Error-Handling/daniil.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@betagamma?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Daniil Silantev"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Daniil Silantev</span></a><br>This  is the third article on a series of  articles on <code>Project Reactor</code>. In previous <a href="http://localhost:4000/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/" target="_blank" rel="noopener">article</a> we discussed different operators  in Project Reactor. In this article, Ill show you how to do error handling in reactor. Well do this through examples.</p>
<p>In Reactive programming errors are also consider as terminal events. When an error occurs, event is sent to <code>onError</code> method of Subscriber.Before we start looking at how we handle errors, you must keep in mind that any error in a reactive sequence is a terminal event. Even if an error-handling operator is used, it <em>does not let the original sequence continue</em>. Rather, it converts the onError signal into the start of a new sequence (the fallback one). In other words, it replaces the terminated sequence upstream of it.</p>
<p><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/projectreactor-reactive-streams" target="_blank" rel="noopener">here</a></em></p>
<h3 id="OnError"><a href="#OnError" class="headerlink" title="OnError"></a>OnError</h3><p>In below code blok, subscriber will print values from 1,2,3,4,5 and after that onError code block will get executed. Note that number 6 will never be printed as Error is terminal event. <code>subscriber Completed</code> line will also not be printed on console as in case of error we do not get <code>onComplete</code> event.<br><figure class="highlight java"><figcaption><span>OnError</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testErrorFlowFlux</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">                                    .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">                                    .concatWith(Flux.just(<span class="number">6</span>));</span><br><span class="line">   fluxFromJust.subscribe(</span><br><span class="line">           (it)-&gt; System.out.println(<span class="string">"Number is "</span> + it),  <span class="comment">// OnNext</span></span><br><span class="line">           (e) -&gt; e.printStackTrace(),                    <span class="comment">//OnError</span></span><br><span class="line">           () -&gt; System.out.println(<span class="string">"subscriber Completed"</span>) <span class="comment">//onComplete</span></span><br><span class="line">   );</span><br><span class="line">   <span class="comment">//To Unit test this code </span></span><br><span class="line">    StepVerifier</span><br><span class="line">           .create(fluxFromJust)</span><br><span class="line">           .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">           .expectError(RuntimeException.class);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="onErrorResume"><a href="#onErrorResume" class="headerlink" title="onErrorResume"></a>onErrorResume</h3><p>If you want to report exception and then want to return some fallback value you can use onErrorResume  </p>
<figure class="highlight java"><figcaption><span>onErrorResume</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOnErrorResume</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">            .concatWith(Flux.just(<span class="number">6</span>))</span><br><span class="line">            .onErrorResume(e-&gt;&#123;</span><br><span class="line">                log.info(<span class="string">"**************"</span>);</span><br><span class="line">                System.out.println(<span class="string">"Exception occured "</span> + e.getMessage());</span><br><span class="line">                <span class="comment">//Return Some Fallback Values</span></span><br><span class="line">                <span class="keyword">return</span> Flux.just(<span class="number">7</span>,<span class="number">8</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">    </span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .expectNext(<span class="number">7</span>,<span class="number">8</span>)</span><br><span class="line">           .verifyComplete();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 
<h3 id="onErrorReturn"><a href="#onErrorReturn" class="headerlink" title="onErrorReturn"></a>onErrorReturn</h3><p><code>onErrorReturn</code> can be used if you just want to return some fallback value for error item<br><figure class="highlight java"><figcaption><span>onErrorResume</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOnErrorReturn</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">            .concatWith(Flux.just(<span class="number">6</span>))</span><br><span class="line">            .onErrorReturn(<span class="number">99</span>)</span><br><span class="line">           ;</span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .expectNext(<span class="number">99</span>)</span><br><span class="line">            .verifyComplete();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="OnErrorContinue"><a href="#OnErrorContinue" class="headerlink" title="OnErrorContinue"></a>OnErrorContinue</h3><p>If you want to ignore error produce by any <strong>operator</strong> <code>onErrorContinue</code> can be use.<br><code>onErrorContinue</code>   will ignore the error element and continue the sequence.<br>in below example for number 3 we are getting some exception, onErrorContinue will simply ignore that exception.<br><figure class="highlight java"><figcaption><span>onErrorContinue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">   </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOnErrorContinue</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .map(i-&gt;mapSomeValue(i))</span><br><span class="line">            .onErrorContinue((e,i)-&gt;&#123;</span><br><span class="line">                System.out.println(<span class="string">"Error For Item +"</span> + i );</span><br><span class="line">            &#125;)</span><br><span class="line">            ;</span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .verifyComplete();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">mapSomeValue</span><span class="params">(Integer i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( i==<span class="number">3</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Exception From Map"</span>);</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="OnErrorMap"><a href="#OnErrorMap" class="headerlink" title="OnErrorMap"></a>OnErrorMap</h3><p>To Map Exception to any custom exception<br><figure class="highlight java"><figcaption><span>OnErrorMap</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOnErrorMap</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">            .concatWith(Flux.just(<span class="number">6</span>))</span><br><span class="line">            .map(i-&gt;i*<span class="number">2</span>)</span><br><span class="line">            .onErrorMap(e -&gt; <span class="keyword">new</span> CustomeException(e) )</span><br><span class="line">            ;</span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">2</span>, <span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>)</span><br><span class="line">            .expectError(CustomeException.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </p>
<h3 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h3><p>You can add retry on error. But keep in mind the retry will be started from first element.<br><figure class="highlight java"><figcaption><span>retry</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOnRetry</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">            .map(i-&gt;i*<span class="number">2</span>)</span><br><span class="line">            .onErrorMap(e -&gt; <span class="keyword">new</span> CustomeException(e) )</span><br><span class="line">            .retry(<span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">2</span>, <span class="number">4</span>,<span class="number">6</span>)</span><br><span class="line">            .expectNext(<span class="number">2</span>, <span class="number">4</span>,<span class="number">6</span>)</span><br><span class="line">            .expectNext(<span class="number">2</span>, <span class="number">4</span>,<span class="number">6</span>)</span><br><span class="line">            .expectError(CustomeException.class)</span><br><span class="line">            .verify();</span><br><span class="line">&#125;</span><br><span class="line">   </span><br></pre></td></tr></table></figure> </p>
<h3 id="onErrorStop"><a href="#onErrorStop" class="headerlink" title="onErrorStop"></a>onErrorStop</h3><p>   onErrorStop will stop the execution<br>   <figure class="highlight java"><figcaption><span>onErrorStop</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOnErrorStop</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">            .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">            .concatWith(Flux.just(<span class="number">6</span>))</span><br><span class="line">            .map(i-&gt;doubleValue(i))</span><br><span class="line">            .onErrorStop();</span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">2</span>, <span class="number">4</span>,<span class="number">6</span>)</span><br><span class="line">            .verifyError();</span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">private</span> Integer <span class="title">doubleValue</span><span class="params">(Integer i)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"Doing Multiple"</span>);</span><br><span class="line">    <span class="keyword">return</span> i*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="doOnError"><a href="#doOnError" class="headerlink" title="doOnError"></a>doOnError</h3><p>It you want to execute side effect on error<br><figure class="highlight java"><figcaption><span>doOnError</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDoOnError</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">            .doOnError(e -&gt; System.out.println(<span class="string">"Rum some Side effect!!"</span>));</span><br><span class="line"></span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .expectError()</span><br><span class="line">            .verify();</span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="doFinally"><a href="#doFinally" class="headerlink" title="doFinally"></a>doFinally</h3><p><code>doFinally</code> is similar to <strong>finally block</strong> of try catch.<br><figure class="highlight java"><figcaption><span>doOnError</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDoFinally</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)))</span><br><span class="line">            .doFinally( i-&gt;&#123;</span><br><span class="line">                <span class="keyword">if</span> (SignalType.ON_ERROR.equals(i)) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Completed with Error "</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (SignalType.ON_COMPLETE.equals(i)) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Completed without Error "</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(fluxFromJust)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .expectError()</span><br><span class="line">            .verify();</span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/projectreactor-reactive-streams" target="_blank" rel="noopener">here</a></em></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2020/01/04/Project-Reactor-Part-3-Error-Handling/" data-id="cl250z7370011x36bm0xds6nb" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2020/01/04/Project-Reactor-Part-3-Error-Handling/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2020/01/04/Project-Reactor-Part-3-Error-Handling/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Part-2-Process-and-Transform-Flux-Mono" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/">Project Reactor [Part 2]  Exploring Operators in Flux &amp; Mono</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/">
            <time datetime="2020-01-01T16:17:37.000Z" itemprop="datePublished">2020-01-01</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Project-Reactor/">Project Reactor</a>, <a class="tag-link" href="/tags/Reactive-Programming/">Reactive Programming</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/WebFlux/">WebFlux</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/daniil.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@betagamma?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Daniil Silantev"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Daniil Silantev</span></a></p>
<p>This  is the second article on a series of <code>Project Reactor</code>. In previous <a href="http://localhost:4000/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/" target="_blank" rel="noopener">article</a> we discussed basic of Flux an Mono. In this second article, Ill show you how  to use Operators to modified and transform flux. Well do this through examples.<br><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/projectreactor-reactive-streams" target="_blank" rel="noopener">here</a></em></p>
<h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p>This is similar to java 8 stream filter. It takes predicates, the elements which satisfies predicate condition will be pass thro.<br><figure class="highlight java"><figcaption><span>Filtering</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFilteringFlux</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>).log();</span><br><span class="line">    Flux&lt;Integer&gt; filter = fluxFromJust.filter(i -&gt; i % <span class="number">2</span> == <span class="number">0</span>);<span class="comment">//filter the even numbers only</span></span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(filter)</span><br><span class="line">            .expectNext(<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>)</span><br><span class="line">            .verifyComplete();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct"></a>Distinct</h3><p>it filter out duplicates.<br><figure class="highlight java"><figcaption><span>Distinct</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">distinct</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>).log();</span><br><span class="line">    Flux&lt;Integer&gt; distinct = fluxFromJust.distinct();</span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(distinct)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .verifyComplete();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="takeWhile"><a href="#takeWhile" class="headerlink" title="takeWhile"></a>takeWhile</h3><p>Consumes values from flux until predicate returns TRUE for the values<br><figure class="highlight java"><figcaption><span>takeWhile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">takeWhile</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>).log();</span><br><span class="line">    Flux&lt;Integer&gt; takeWhile = fluxFromJust.takeWhile(i -&gt; i &lt;=<span class="number">5</span>);</span><br><span class="line">    StepVerifier</span><br><span class="line">            .create(takeWhile)</span><br><span class="line">            .expectNext(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">            .verifyComplete();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="skipWhile"><a href="#skipWhile" class="headerlink" title="skipWhile"></a>skipWhile</h3><p>Skips elements until predicate returns TRUE for the values<br><figure class="highlight java"><figcaption><span>skipWhile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">skipWhile</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>).log();</span><br><span class="line">     Flux&lt;Integer&gt; takeWhile = fluxFromJust.skipWhile(i -&gt; i &lt;=<span class="number">5</span>);</span><br><span class="line">     StepVerifier</span><br><span class="line">             .create(takeWhile)</span><br><span class="line">             .expectNext(<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>)</span><br><span class="line">             .verifyComplete();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>Map operation is similar to java 8 stream map operation. Map operation is use for transforming element from one Type to another.<br><figure class="highlight java"><figcaption><span>Convert String Flux To Integer Flux</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testMapOperationFlux</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     Flux&lt;String&gt; fluxFromJust = Flux.just(<span class="string">"RandomString"</span>, <span class="string">"SecondString"</span>,<span class="string">"XCDFRG"</span>).log();</span><br><span class="line">     Flux&lt;Integer&gt; filter = fluxFromJust.map(i-&gt; i.length());</span><br><span class="line">     StepVerifier</span><br><span class="line">             .create(filter)</span><br><span class="line">             .expectNext(<span class="number">12</span>,<span class="number">12</span>,<span class="number">6</span>)</span><br><span class="line">             .verifyComplete();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h3><p>FlatMap Transform the elements emitted by this Flux asynchronously into Publishers, then flatten these inner publishers into a single Flux through merging, which allow them to interleave.<br><figure class="highlight java"><figcaption><span>FlatMap</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFlatMapFlux</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>).log();</span><br><span class="line">      Flux&lt;Integer&gt; integerFlux = fluxFromJust</span><br><span class="line">              .flatMap(i -&gt; getSomeFlux(i));<span class="comment">//getSomeFlux returns flux of range ,</span></span><br><span class="line">                                              <span class="comment">// then we do flatMap on all Flux to convert them in to single Flux</span></span><br><span class="line"></span><br><span class="line">      StepVerifier</span><br><span class="line">              .create(integerFlux)</span><br><span class="line">              .expectNextCount(<span class="number">30</span>)</span><br><span class="line">              .verifyComplete();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> Flux&lt;Integer&gt; <span class="title">getSomeFlux</span><span class="params">(Integer i)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> Flux.range(i,<span class="number">10</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h3><p>Keep information about the order in which source values were received by indexing them with a 0-based incrementing long<br><figure class="highlight java"><figcaption><span>index</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">maintainIndex</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">      Flux&lt;Tuple2&lt;Long, String&gt;&gt; index = Flux</span><br><span class="line">              .just(<span class="string">"First"</span>, <span class="string">"Second"</span>, <span class="string">"Third"</span>)</span><br><span class="line">              .index();</span><br><span class="line">  StepVerifier.create(index)</span><br><span class="line">              .expectNext(Tuples.of(<span class="number">0L</span>,<span class="string">"First"</span>))</span><br><span class="line">              .expectNext(Tuples.of(<span class="number">1L</span>,<span class="string">"Second"</span>))</span><br><span class="line">              .expectNext(Tuples.of(<span class="number">2L</span>,<span class="string">"Third"</span>))</span><br><span class="line">              .verifyComplete();</span><br><span class="line"></span><br><span class="line">  &#125;  </span><br></pre></td></tr></table></figure></p>
<h3 id="flatMapMany"><a href="#flatMapMany" class="headerlink" title="flatMapMany"></a>flatMapMany</h3><p>This operator is very useful if you want to convert mono to flux.flatMapMany transforms the signals emitted by this Mono into signal-specific Publishers, then forward the applicable Publishers emissions into the returned Flux.<br><figure class="highlight java"><figcaption><span>flatMapMany</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMapManyTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Mono&lt;List&lt;Integer&gt;&gt; just = Mono.just(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">        Flux&lt;Integer&gt; integerFlux = just.flatMapMany(it -&gt; Flux.fromIterable(it));</span><br><span class="line">        StepVerifier</span><br><span class="line">                .create(integerFlux)</span><br><span class="line">                .expectNext(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">                .verifyComplete();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="startWith"><a href="#startWith" class="headerlink" title="startWith"></a>startWith</h3><figure class="highlight java"><figcaption><span>startWith</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">startWith</span><span class="params">()</span></span>&#123;</span><br><span class="line">       Flux&lt;Integer&gt; just = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">       Flux&lt;Integer&gt; integerFlux = just.startWith(<span class="number">0</span>);</span><br><span class="line">       StepVerifier.create(integerFlux)</span><br><span class="line">               .expectNext(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">               .verifyComplete();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="concatWith"><a href="#concatWith" class="headerlink" title="concatWith"></a>concatWith</h3><p>The concatWith method does <strong>concatenation</strong> of two flux <strong>sequentially</strong> subscribing to the first flux  then waits for completion and then subscribes to the next.<br><figure class="highlight java"><figcaption><span>concatWith</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">concatWith</span><span class="params">()</span></span>&#123;</span><br><span class="line">      Flux&lt;Integer&gt; just = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">      Flux&lt;Integer&gt; integerFlux = just.concatWith(Flux.just(<span class="number">4</span>,<span class="number">5</span>));</span><br><span class="line">      StepVerifier.create(integerFlux)</span><br><span class="line">              .expectNext(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">              .verifyComplete();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p>Merge data from Publisher sequences contained in an array / vararg into an interleaved merged sequence. Unlike concat, sources are subscribed to eagerly.<br><figure class="highlight java"><figcaption><span>Merge</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">zip</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">      Flux&lt;Integer&gt; firsFlux = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>).delayElements(Duration.ofSeconds(<span class="number">1</span>));</span><br><span class="line">      Flux&lt;Integer&gt; secondFlux = Flux.just(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>).delayElements(Duration.ofSeconds(<span class="number">1</span>));</span><br><span class="line">      firsFlux.mergeWith(secondFlux)</span><br><span class="line">              .subscribe(System.out::println);</span><br><span class="line">      <span class="comment">//This will print numbers received from firsFlux and secondFlux in random order  </span></span><br><span class="line">      TimeUnit.SECONDS.sleep(<span class="number">11</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="CollectList"><a href="#CollectList" class="headerlink" title="CollectList"></a>CollectList</h3><p>Collect all elements emitted by this Flux into a List that is emitted by the resulting Mono when this sequence completes.</p>
<figure class="highlight java"><figcaption><span>CollectList</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">CollectList</span><span class="params">()</span></span>&#123;</span><br><span class="line">      Mono&lt;List&lt;Integer&gt;&gt; listMono = Flux</span><br><span class="line">              .just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">              .collectList();</span><br><span class="line">      StepVerifier.create(listMono)</span><br><span class="line">              .expectNext(Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">              .verifyComplete();</span><br><span class="line">  &#125;    </span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>CollectSortedList</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">CollectSortedListList</span><span class="params">()</span></span>&#123;</span><br><span class="line">      Mono&lt;List&lt;Integer&gt;&gt; listMono = Flux</span><br><span class="line">              .just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">9</span>,<span class="number">8</span>)</span><br><span class="line">              .collectSortedList();</span><br><span class="line">      StepVerifier.create(listMono)</span><br><span class="line">              .expectNext(Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">9</span>))</span><br><span class="line">              .verifyComplete();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><p>Zip multiple sources together, that is to say wait for all the sources to emit one element and combine these elements once into an output value (constructed by the provided combinator). The operator will continue doing so until any of the sources completes. Errors will immediately be forwarded. This Step-Merge processing is especially useful in Scatter-Gather scenarios.</p>
<figure class="highlight java"><figcaption><span>Zip</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">zip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     Flux&lt;Integer&gt; firsFlux = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">     Flux&lt;Integer&gt; secondFlux = Flux.just(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>);</span><br><span class="line">     Flux&lt;Integer&gt; zip = Flux.zip(firsFlux, secondFlux, (num1, num2) -&gt; num1 + num2);</span><br><span class="line">     StepVerifier</span><br><span class="line">             .create(zip)</span><br><span class="line">             .expectNext(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>)</span><br><span class="line">             .verifyComplete();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="buffer"><a href="#buffer" class="headerlink" title="buffer"></a>buffer</h3><p>Collect all incoming values into a single List buffer that will be emitted by the returned Flux once this Flux completes.<br><figure class="highlight java"><figcaption><span>buffer</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">bufferTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      Flux&lt;List&lt;Integer&gt;&gt; buffer = Flux</span><br><span class="line">              .just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">              .buffer(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">      StepVerifier</span><br><span class="line">              .create(buffer)</span><br><span class="line">              .expectNext(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">              .expectNext(Arrays.asList(<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">              .expectNext(Arrays.asList(<span class="number">5</span>, <span class="number">6</span>))</span><br><span class="line">              .expectNext(Arrays.asList(<span class="number">7</span>))</span><br><span class="line">              .verifyComplete();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>You can check all available operators <a href="https://projectreactor.io/docs/core/release/reference/#which-operator" target="_blank" rel="noopener">here</a></p>
<p>It the next article, Ill show you how to handel errors while processing data in Mono and Flux.</p>
<p><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/projectreactor-reactive-streams" target="_blank" rel="noopener">here</a></em></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/" data-id="cl250z7370010x36btrpftnjd" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2020/01/01/Part-2-Process-and-Transform-Flux-Mono/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2022/04/18/Spring-Boot-AWS-RDS/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/aws-rds-logo-png-transparent.png)" alt="Spring Boot With AWS RDS - Part 1" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2022/04/18/Spring-Boot-AWS-RDS/" class="title">Spring Boot With AWS RDS - Part 1</a></p>
                            <p class="item-date"><time datetime="2022-04-18T09:56:34.000Z" itemprop="datePublished">2022-04-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/05/16/Spring-Boot-with-AWS-S3/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Spring Boot With AWS S3" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/05/16/Spring-Boot-with-AWS-S3/" class="title">Spring Boot With AWS S3</a></p>
                            <p class="item-date"><time datetime="2021-05-16T20:17:01.000Z" itemprop="datePublished">2021-05-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/05/09/Spring-Boot-with-AWS-sqs/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Spring Boot With AWS SQS" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/05/09/Spring-Boot-with-AWS-sqs/" class="title">Spring Boot With AWS SQS</a></p>
                            <p class="item-date"><time datetime="2021-05-09T15:09:52.000Z" itemprop="datePublished">2021-05-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/04/25/spring-boot-with-hibernate-envers/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Spring Boot With Hibernate Envers" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/04/25/spring-boot-with-hibernate-envers/" class="title">Spring Boot With Hibernate Envers</a></p>
                            <p class="item-date"><time datetime="2021-04-25T19:30:36.000Z" itemprop="datePublished">2021-04-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Consumer Driven Contract Test Using Spring Cloud Contract" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/" class="title">Consumer Driven Contract Test Using Spring Cloud Contract</a></p>
                            <p class="item-date"><time datetime="2021-02-20T20:00:29.000Z" itemprop="datePublished">2021-02-20</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/AOP/" style="font-size: 10px;">AOP</a> <a href="/tags/AWS/" style="font-size: 13.75px;">AWS</a> <a href="/tags/Angular6/" style="font-size: 11.25px;">Angular6</a> <a href="/tags/Bigdecimal/" style="font-size: 10px;">Bigdecimal</a> <a href="/tags/Cloud-Bus/" style="font-size: 10px;">Cloud Bus</a> <a href="/tags/Cloud-Config/" style="font-size: 10px;">Cloud Config</a> <a href="/tags/Collector/" style="font-size: 10px;">Collector</a> <a href="/tags/Comparator/" style="font-size: 11.25px;">Comparator</a> <a href="/tags/Concurrency/" style="font-size: 17.5px;">Concurrency</a> <a href="/tags/Contract-Testing/" style="font-size: 10px;">Contract Testing</a> <a href="/tags/Docker/" style="font-size: 11.25px;">Docker</a> <a href="/tags/Eureka/" style="font-size: 10px;">Eureka</a> <a href="/tags/Filter/" style="font-size: 10px;">Filter</a> <a href="/tags/Functional-Programming/" style="font-size: 10px;">Functional Programming</a> <a href="/tags/Grafana/" style="font-size: 11.25px;">Grafana</a> <a href="/tags/Helm/" style="font-size: 10px;">Helm</a> <a href="/tags/Hibernate-Envers/" style="font-size: 10px;">Hibernate Envers</a> <a href="/tags/JPA/" style="font-size: 10px;">JPA</a> <a href="/tags/JUnit-5/" style="font-size: 10px;">JUnit-5</a> <a href="/tags/JWT/" style="font-size: 10px;">JWT</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java-8/" style="font-size: 20px;">Java-8</a> <a href="/tags/Java-9/" style="font-size: 13.75px;">Java-9</a> <a href="/tags/Kotlin/" style="font-size: 10px;">Kotlin</a> <a href="/tags/Kotlin-Types/" style="font-size: 10px;">Kotlin Types</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Map/" style="font-size: 13.75px;">Map</a> <a href="/tags/Material/" style="font-size: 10px;">Material</a> <a href="/tags/Microservice/" style="font-size: 16.25px;">Microservice</a> <a href="/tags/Minikube/" style="font-size: 10px;">Minikube</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mongodb/" style="font-size: 11.25px;">Mongodb</a> <a href="/tags/Multithreading/" style="font-size: 17.5px;">Multithreading</a> <a href="/tags/Navigation/" style="font-size: 10px;">Navigation</a> <a href="/tags/OpenFeign/" style="font-size: 10px;">OpenFeign</a> <a href="/tags/Optional/" style="font-size: 10px;">Optional</a> <a href="/tags/Pipes/" style="font-size: 10px;">Pipes</a> <a href="/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/tags/Project-Reactor/" style="font-size: 12.5px;">Project Reactor</a> <a href="/tags/Prometheus/" style="font-size: 11.25px;">Prometheus</a> <a href="/tags/RDS/" style="font-size: 10px;">RDS</a> <a href="/tags/RXjava/" style="font-size: 10px;">RXjava</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Reactive-Programming/" style="font-size: 13.75px;">Reactive Programming</a> <a href="/tags/ReactiveX/" style="font-size: 10px;">ReactiveX</a> <a href="/tags/Rest/" style="font-size: 10px;">Rest</a> <a href="/tags/Ribbon/" style="font-size: 10px;">Ribbon</a> <a href="/tags/Routing/" style="font-size: 10px;">Routing</a> <a href="/tags/S3/" style="font-size: 10px;">S3</a> <a href="/tags/SQS/" style="font-size: 10px;">SQS</a> <a href="/tags/Smart-Casts/" style="font-size: 10px;">Smart Casts</a> <a href="/tags/Sorting/" style="font-size: 13.75px;">Sorting</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 18.75px;">Spring Boot</a> <a href="/tags/Spring-Boot-Admin/" style="font-size: 10px;">Spring Boot Admin</a> <a href="/tags/Spring-Boot-Starter/" style="font-size: 10px;">Spring Boot Starter</a> <a href="/tags/Spring-Cloud/" style="font-size: 15px;">Spring Cloud</a> <a href="/tags/Spring-Cloud-Contract/" style="font-size: 10px;">Spring Cloud Contract</a> <a href="/tags/Spring-Security/" style="font-size: 10px;">Spring Security</a> <a href="/tags/Spring-Batch/" style="font-size: 10px;">Spring-Batch</a> <a href="/tags/Stream/" style="font-size: 13.75px;">Stream</a> <a href="/tags/Streams/" style="font-size: 10px;">Streams</a> <a href="/tags/Summary-Statistics/" style="font-size: 10px;">Summary Statistics</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/Unit-Testing/" style="font-size: 10px;">Unit Testing</a> <a href="/tags/WebFlux/" style="font-size: 12.5px;">WebFlux</a> <a href="/tags/containers/" style="font-size: 10px;">containers</a> <a href="/tags/kubernetes/" style="font-size: 10px;">kubernetes</a> <a href="/tags/pact/" style="font-size: 10px;">pact</a> <a href="/tags/testcontainers/" style="font-size: 10px;">testcontainers</a>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">9</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://stackoverflow.com/users/320087/niraj-sonawane?tab=profile">StackOverflow</a>
                    </li>
                
                    <li>
                        <a href="https://nirajsonawane.github.io/portfolio/">Portfolio</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2022 Niraj Sonawane<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
        this.page.identifier = '';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'https-nirajsonawane-github-io-1' + '.disqus.com/count.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>