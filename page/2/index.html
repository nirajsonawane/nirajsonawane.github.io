<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
<!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5B6V6ZJ');</script>
    <!-- End Google Tag Manager -->    
        
    <meta charset="utf-8">
    
    <title>Niraj Sonawane</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta property="og:type" content="website">
<meta property="og:title" content="Niraj Sonawane">
<meta property="og:url" content="https://nirajsonawane.github.io/page/2/index.html">
<meta property="og:site_name" content="Niraj Sonawane">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Niraj Sonawane">
    

    

    
        <link rel="icon" href="https://raw.githubusercontent.com/nirajsonawane/portfolio/master/images/icon.png">
    

    <link rel="stylesheet" href="/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-125455524-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>
</html>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Niraj Sonawane</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About Me</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://www.gravatar.com/avatar/8328f9fc834752ead8a75bf4950fa304" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About Me</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://www.gravatar.com/avatar/8328f9fc834752ead8a75bf4950fa304?s=128" />
            <h2 id="name">Niraj Sonawane</h2>
            <h3 id="title">I am a Java developer, open-source contributor, student and lifelong learner.</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>Pune, India</span>
            <a id="follow" target="_blank" href="https://github.com/nirajsonawane">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                60
                <span>posts</span>
            </div>
            <div class="article-info-block">
                70
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/nirajsonawane/" target="_blank" title="github" class=tooltip>
                            <i class="fab fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://stackoverflow.com/users/320087/niraj-sonawane?tab=profile" target="_blank" title="stack-overflow" class=tooltip>
                            <i class="fab fa-stack-overflow"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-Project-Reactor-Playing-With-Flux-Mono" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/">Project Reactor [Part 1] - Playing With Flux &amp; Mono</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/">
            <time datetime="2019-12-28T16:11:27.000Z" itemprop="datePublished">2019-12-28</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Project-Reactor/">Project Reactor</a>, <a class="tag-link" href="/tags/Reactive-Programming/">Reactive Programming</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/WebFlux/">WebFlux</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/daniil.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@betagamma?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Daniil Silantev"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Daniil Silantev</span></a></p>
<h3 id="What-is-Reactor"><a href="#What-is-Reactor" class="headerlink" title="What is Reactor"></a>What is Reactor</h3><p><a href="https://projectreactor.io/" target="_blank" rel="noopener">Project Reactor</a> implements the reactive programming model.It implements the Reactive Streams Specification  a standard for building reactive applications.<br>reactor integrates directly with the Java 8 functional APIs, notably CompletableFuture, Stream, and Duration. It offers composable asynchronous sequence APIs — <strong>Flux (for [N] elements) and Mono (for [0|1] elements).</strong></p>
<h3 id="Key-Components-of-Reactive-Manifesto-and-Reactive-Streams-Specification"><a href="#Key-Components-of-Reactive-Manifesto-and-Reactive-Streams-Specification" class="headerlink" title="Key Components of Reactive Manifesto and Reactive Streams Specification"></a>Key Components of Reactive Manifesto and Reactive Streams Specification</h3><p><a href="https://www.reactive-streams.org/" target="_blank" rel="noopener">Reactive Streams</a> is an initiative to provide a standard for asynchronous stream processing with non-blocking back pressure. This encompasses efforts aimed at runtime environments (JVM and JavaScript) as well as network protocols. Reactive Specification are based on <a href="https://www.reactivemanifesto.org/" target="_blank" rel="noopener">Reactive Manifesto</a></p>
<p>Reactive Specifications defines below key Contracts<br><strong>Publisher</strong>: Representing sources of data also called as Observables.<br><strong>Subscriber</strong>: Listening to the Publisher. Subscriber subscribes to publisher<br><strong>Subscription</strong>: Publisher will create a subscription for every Subscriber which will try to subscribe to it.<br><strong>Processor</strong>: A processor can be used as a publisher as well as subscriber. Processors are used for data transformation. these are set of methods for modifying and composing the data.</p>
<h4 id="Objective-Of-this-post"><a href="#Objective-Of-this-post" class="headerlink" title="Objective Of this post"></a>Objective Of this post</h4><p>Objective of these series of post is to show, How to use <code>Flux</code> &amp; <code>Mono</code>. How to subscribe to them for consuming data. Different operation that we can perform on data while consuming data. I will be using <strong>Spring Webflux</strong> which internally used <strong>Project Reactor</strong>  </p>
<p>Let get started, We need <code>spring-boot-starter-webflux</code> to get started.Project rector also provides very handy library <code>reactor-test</code> for unit testing.   </p>
<p><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/projectreactor-reactive-streams" target="_blank" rel="noopener">here</a></em></p>
<figure class="highlight xml"><figcaption><span>Pom File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.projectreactor<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>reactor-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scop</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="Creating-Flux-and-Mono"><a href="#Creating-Flux-and-Mono" class="headerlink" title="Creating Flux and Mono"></a>Creating Flux and Mono</h5><p><strong>Flux</strong> A Reactive Streams Publisher with rx operators that emits 0 to N elements, and then completes(successfully or with an error).</p>
<figure class="highlight java"><figcaption><span>Few Example of creating Flux</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);<span class="comment">//Create a Flux that emits the provided elements and then completes.</span></span><br><span class="line">Flux&lt;Integer&gt; integerFlux = Flux.fromIterable(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));<span class="comment">//Create a Flux that emits the items contained in the provided Iterable.</span></span><br><span class="line">Flux.fromStream(Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>).stream());<span class="comment">//Create a Flux that emits the items contained in the provided Stream.</span></span><br><span class="line">Integer[] num2 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">Flux&lt;Integer&gt; integerFluxFromArray = Flux.fromArray(num2);<span class="comment">//Create a Flux that emits the items contained in the provided array.</span></span><br><span class="line">Flux.generate(&lt;Consumer&gt;) ;<span class="comment">//Programmatically create a Flux by generating signals one-by-one via a consumer callback. </span></span><br><span class="line">Flux.Creare(&lt;Consumer&gt;); <span class="comment">//Programmatically create a Flux with the capability of emitting multiple elements in a synchronous or asynchronous manner through the FluxSink API.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>Mono</strong> A Reactive Streams Publisher with basic rx operators that completes successfully by emitting an element, or with an error.</p>
<figure class="highlight java"><figcaption><span>Few Examples of creating Mono</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Mono&lt;Integer&gt; just = Mono.just(<span class="number">1</span>);<span class="comment">//</span></span><br><span class="line">Mono&lt;Object&gt; empty = Mono.empty();<span class="comment">//</span></span><br><span class="line">Mono.create(); <span class="comment">//Create a Mono that completes without emitting any item.</span></span><br><span class="line">Mono.from(&lt;Publisher&gt;)<span class="comment">//Expose the specified Publisher with the Mono API, and ensure it will emit 0 or 1 item.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//there are multiple options available for creating mono from Callable,CompletionStage,CompletableFuture etc </span></span><br><span class="line">Mono.fromCallable() </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Flux-amp-Mono-are-lazy"><a href="#Flux-amp-Mono-are-lazy" class="headerlink" title="Flux &amp; Mono are lazy"></a>Flux &amp; Mono are lazy</h4><p>Lazy in context of reactive programming  means, No Matter how many operation you do on the stream, They won’t be executed until you consume it. Flux &amp; Mono start emitting values only when subscriber is attached.</p>
<h5 id="Creating-Subscriber-and-consuming-values"><a href="#Creating-Subscriber-and-consuming-values" class="headerlink" title="Creating Subscriber and consuming values"></a>Creating Subscriber and consuming values</h5><p>Subscriber has multiple overloaded methods, let’s check few of them.</p>
<p>Subscriber with <code>onNext</code><br><figure class="highlight java"><figcaption><span>Subscriber with consumer (onNext)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">fluxFromJust.subscribe(i-&gt;System.out.println(i));<span class="comment">//It will print number 1,2,3</span></span><br></pre></td></tr></table></figure></p>
<p>Subscriber with <code>onNext</code> &amp; <code>onError</code>. OnError will be get call in case of error.<br>Flux has one handy <code>concatWith</code> which we can use to concat error<br><figure class="highlight java"><figcaption><span>Subscriber with consumer and error handler (onError)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;Integer&gt; fluxFromJust = </span><br><span class="line">        Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">             .concatWith(Flux.error( <span class="keyword">new</span> RuntimeException(<span class="string">"Test Exception"</span>));</span><br><span class="line">        fluxFromJust.subscribe(</span><br><span class="line">                i-&gt;System.out.println(i),<span class="comment">// onNext</span></span><br><span class="line">                e-&gt;System.out.println(<span class="string">"In Error Block "</span> + e.getMessage()) <span class="comment">//onError</span></span><br><span class="line">        );</span><br></pre></td></tr></table></figure><br>Subscriber with <code>onNext</code>, <code>onError</code> and <code>onComplete</code>. On Successful completion onComplete method get’s called<br><figure class="highlight java"><figcaption><span>Subscriber with consumer, error handler and onComplete</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;Integer&gt; fluxFromJust = </span><br><span class="line">        Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">             .concatWith(Flux.error( <span class="keyword">new</span> RuntimeException(<span class="string">"Test Exception"</span>));</span><br><span class="line">        fluxFromJust.subscribe(</span><br><span class="line">                i-&gt;System.out.println(i),<span class="comment">//Will Print 1,2,3 //onNext</span></span><br><span class="line">                e-&gt;System.out.println(<span class="string">"In Error Block "</span> + e.getMessage())<span class="comment">//OnError</span></span><br><span class="line">                ()-&gt; System.out.println(<span class="string">"Process Completed"</span>) <span class="comment">//OnComplete</span></span><br><span class="line">        );</span><br></pre></td></tr></table></figure></p>
<p>To Log the activities on Flux / Mono. We can use log method and it will start logging all events.<br><figure class="highlight java"><figcaption><span>Log Events</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Flux&lt;Integer&gt; fluxFromJust = </span><br><span class="line">        Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">            .log()             </span><br></pre></td></tr></table></figure></p>
<h3 id="Lets-write-some-Unit-test-using-reactor-test"><a href="#Lets-write-some-Unit-test-using-reactor-test" class="headerlink" title="Lets write some Unit test using reactor-test"></a>Lets write some Unit test using reactor-test</h3><p><code>StepVerifier</code> can be use like below to validate the expectations<br><figure class="highlight java"><figcaption><span>StepVerifier</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreateFluxAndSubscribe</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).log();</span><br><span class="line">        StepVerifier</span><br><span class="line">                .create(fluxFromJust)</span><br><span class="line">                .expectNext(<span class="number">1</span>)</span><br><span class="line">                .expectNext(<span class="number">2</span>)</span><br><span class="line">                .expectNext(<span class="number">3</span>)</span><br><span class="line">                .verifyComplete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>IF You want to verify only count then we can use <code>expectNextCount</code><br><figure class="highlight java"><figcaption><span>StepVerifier</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreateFluxAndSubscribeVerifyCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).log();</span><br><span class="line">        StepVerifier</span><br><span class="line">                .create(fluxFromJust)</span><br><span class="line">                .expectNextCount(<span class="number">3</span>)</span><br><span class="line">                .verifyComplete();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><br>To Assert on Error<br><figure class="highlight java"><figcaption><span>StepVerifier</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCreateFluxAndSubscribeVerifyError</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       Flux&lt;Integer&gt; fluxFromJust = Flux.just(<span class="number">1</span>).concatWith(Flux.error(<span class="keyword">new</span> RuntimeException(<span class="string">"Test"</span>)));</span><br><span class="line">       StepVerifier</span><br><span class="line">               .create(fluxFromJust)</span><br><span class="line">               .expectNextCount(<span class="number">1</span>)</span><br><span class="line">               .verifyError(RuntimeException.class);</span><br><span class="line">   &#125; </span><br></pre></td></tr></table></figure><br>It the next article, I’ll show you how to process and transform data in Mono and Flux.<br><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/projectreactor-reactive-streams" target="_blank" rel="noopener">here</a></em></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/" data-id="cl250z7380012x36bbztpfba8" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/12/28/Project-Reactor-Playing-With-Flux-Mono/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Testcontainers-With-Spring-Boot-For-Integration-Testing" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/12/25/Testcontainers-With-Spring-Boot-For-Integration-Testing/">Testcontainers With Spring Boot For Integration Testing</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/12/25/Testcontainers-With-Spring-Boot-For-Integration-Testing/">
            <time datetime="2019-12-25T16:25:48.000Z" itemprop="datePublished">2019-12-25</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Docker/">Docker</a>, <a class="tag-link" href="/tags/Mongodb/">Mongodb</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/containers/">containers</a>, <a class="tag-link" href="/tags/testcontainers/">testcontainers</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/12/25/Testcontainers-With-Spring-Boot-For-Integration-Testing/logo.png">
<h2 id="Take-your-Integration-Tests-to-next-level-using-Testcontainers"><a href="#Take-your-Integration-Tests-to-next-level-using-Testcontainers" class="headerlink" title="Take your Integration Tests to next level using Testcontainers"></a>Take your Integration Tests to next level using <a href="https://www.testcontainers.org/" target="_blank" rel="noopener">Testcontainers</a></h2><p>Now days the modern application interacts with multiple systems like database, microservice within system ,external API, middleware systems etc.It’s become very critical for the success of project to have good Integration test strategy.<br>In memory database like H2, HSQLDB are very popular for Integration testing of persistance layer but these are not close to production environment. If application has dependancy on Docker containers, Then it’s become more difficult to test that code in Integration environment. <strong>Testcontainers help us to handle these challenges</strong></p>
<h3 id="What-is-Testcontainers"><a href="#What-is-Testcontainers" class="headerlink" title="What is Testcontainers?"></a>What is Testcontainers?</h3><p><a href="https://www.testcontainers.org/" target="_blank" rel="noopener">Testcontainers</a> is a Java library that supports JUnit tests, providing lightweight, throwaway instances of common databases, Selenium web browsers, or anything else that can run in a <strong>Docker container</strong>.</p>
<p><em>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/SpringBoot-mongodb-testcontainers.git" target="_blank" rel="noopener">here</a></em></p>
<h3 id="Let’s-Write-some-Integration-Test-using-Testcontainers-For-Spring-Boot-App"><a href="#Let’s-Write-some-Integration-Test-using-Testcontainers-For-Spring-Boot-App" class="headerlink" title="Let’s Write some Integration Test using Testcontainers For Spring Boot App"></a>Let’s Write some Integration Test using Testcontainers For Spring Boot App</h3><p><a href="https://nirajsonawane.github.io/2019/12/16/Spring-Boot-Mongodb-Docker-Compose">In previous  Post</a> We created simple Spring Boot application that uses <strong>Mongodb Database</strong> (containrized) let’s write integration test for that. </p>
<p>It’s easy to add Testcontainers to your project - let’s walk through a quick example to see how.</p>
<h4 id="Add-Testcontainer-to-project"><a href="#Add-Testcontainer-to-project" class="headerlink" title="Add Testcontainer to project"></a>Add Testcontainer to project</h4><figure class="highlight xml"><figcaption><span>Pom File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.testcontainers<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testcontainers<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.12.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.testcontainers<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-jupiter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.12.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>                </span><br></pre></td></tr></table></figure>
<h4 id="Creating-a-generic-container-based-on-an-image"><a href="#Creating-a-generic-container-based-on-an-image" class="headerlink" title="Creating a generic container based on an image"></a>Creating a generic container based on an image</h4><p>For Mongodb there is no special test container image available, But we can create one by extending <code>GenericContainer</code><br><figure class="highlight java"><figcaption><span>MongoDbContainer</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MongoDbContainer</span> <span class="keyword">extends</span> <span class="title">GenericContainer</span>&lt;<span class="title">MongoDbContainer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MONGODB_PORT = <span class="number">27017</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_IMAGE_AND_TAG = <span class="string">"mongo:3.2.4"</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MongoDbContainer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(DEFAULT_IMAGE_AND_TAG);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MongoDbContainer</span><span class="params">(@NotNull String image)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(image);</span><br><span class="line">        addExposedPort(MONGODB_PORT);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getPort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getMappedPort(MONGODB_PORT);</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><figcaption><span>You can also create generic container using ClassRule</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@ClassRule</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> GenericContainer mongo = <span class="keyword">new</span> GenericContainer(<span class="string">"mongo:3.2.4"</span>)</span><br><span class="line">                                             .withExposedPorts(<span class="number">27017</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="Starting-the-container-and-using-it-in-test"><a href="#Starting-the-container-and-using-it-in-test" class="headerlink" title="Starting the container and using it in test"></a>Starting the container and using it in test</h4><figure class="highlight java"><figcaption><span>MongoDbContainerTest</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="meta">@ContextConfiguration</span>(initializers = MongoDbContainerTest.MongoDbInitializer.class)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MongoDbContainerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> FruitRepository fruitRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MongoDbContainer mongoDbContainer;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeAll</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">startContainerAndPublicPortIsAvailable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mongoDbContainer = <span class="keyword">new</span> MongoDbContainer();</span><br><span class="line">        mongoDbContainer.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">containerStartsAndPublicPortIsAvailable</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        FruitModel build = FruitModel.builder().color(<span class="string">"Red"</span>).name(<span class="string">"banana"</span>).build();</span><br><span class="line">        mockMvc.perform(post(<span class="string">"/fruits"</span>)</span><br><span class="line">                .contentType(<span class="string">"application/json"</span>)</span><br><span class="line">                .content(objectMapper.writeValueAsString(build)))</span><br><span class="line">               .andExpect(status().isCreated());</span><br><span class="line">        Assert.assertEquals(<span class="number">1</span>, fruitRepository.findAll().size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MongoDbInitializer</span> <span class="keyword">implements</span> <span class="title">ApplicationContextInitializer</span>&lt;<span class="title">ConfigurableApplicationContext</span>&gt; </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(ConfigurableApplicationContext configurableApplicationContext)</span> </span>&#123;</span><br><span class="line">            log.info(<span class="string">"Overriding Spring Properties for mongodb !!!!!!!!!"</span>);</span><br><span class="line"></span><br><span class="line">            TestPropertyValues values = TestPropertyValues.of(</span><br><span class="line">                    <span class="string">"spring.data.mongodb.host="</span> + mongoDbContainer.getContainerIpAddress(),</span><br><span class="line">                    <span class="string">"spring.data.mongodb.port="</span> + mongoDbContainer.getPort()</span><br><span class="line"></span><br><span class="line">            );</span><br><span class="line">            values.applyTo(configurableApplicationContext);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>lets see what we are doing in test line by line.<br><code>@SpringBootTest</code> As we want to write Integration test we are using <code>@SpringBootTest</code> which tells Spring to load complete application context.</p>
<p><code>@AutoConfigureMockMvc</code> configure auto-configuration of MockMvc. As we want to test<br>controller-&gt;service-&gt;repository -&gt;database</p>
<p> <code>@ContextConfiguration</code> Overriding Spring properties. We need to override <code>host</code> and <code>port</code> on which  mongodb testcontainer has started.  </p>
<p> <code>Starting Mongodb container</code> in <code>BeforeAll</code> hook so that DB instance is available during the test.<br>Then In test  we are simpaly calling post method on controller and after that checking if actually data is getting inserted in database or not.   </p>
<h4 id="Using-Predefined-Testcontainer"><a href="#Using-Predefined-Testcontainer" class="headerlink" title="Using Predefined  Testcontainer"></a>Using Predefined  Testcontainer</h4><p>There are some predefined Testcontainer are available, Which are very useful and easy to use<br>e.g <code>MySQLContainer</code> is available for mysql database. let’s  see how to use that<br><figure class="highlight java"><figcaption><span>MySQLContainerTest</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Testcontainers</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySQLContainerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Container</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MySQLContainer mySQLContainer = <span class="keyword">new</span> MySQLContainer();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName</span>(<span class="string">"Should start the container"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Assert.assertTrue(mySQLContainer.isRunning());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>To use the Testcontainers extension annotate your test class with <code>@Testcontainers.</code></p>
<p><strong>Note</strong> You need to think about how you want to use container </p>
<ol>
<li>Containers that are restarted for every test method</li>
<li>Containers that are shared between all methods of a test class</li>
</ol>
<p>If you define Container like this<br><code>@Container private MySQLContainer mySQLContainer = new MySQLContainer();</code> Then it will create new instance for each test case and it you use <code>static</code> like this<br><code>@Container private static MySQLContainer mySQLContainer = new MySQLContainer();</code> then same Instance will be used for all tests.</p>
<p><strong>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/SpringBoot-mongodb-testcontainers.git" target="_blank" rel="noopener">here</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/12/25/Testcontainers-With-Spring-Boot-For-Integration-Testing/" data-id="cl250z73e001hx36b3ypbwvme" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/12/25/Testcontainers-With-Spring-Boot-For-Integration-Testing/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/12/25/Testcontainers-With-Spring-Boot-For-Integration-Testing/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Spring-Boot-Mongodb-Docker-Compose" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/">Spring Boot + Mongodb + Docker Compose</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/">
            <time datetime="2019-12-16T04:40:00.000Z" itemprop="datePublished">2019-12-16</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Docker/">Docker</a>, <a class="tag-link" href="/tags/Mongodb/">Mongodb</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/gabriel.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@gabebarletta?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Gabriel Barletta"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Gabriel Barletta</span></a><br>In this post we will discuss how to use <em>Docker Compose</em> to define and run multi-container Docker applications.<br><strong>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/spring-boot-mongodb-docker-compose-.git" target="_blank" rel="noopener">here</a></strong></p>
<p><strong>Prerequisites</strong><br>To Follow along this post basic knowledge of Docker, Container &amp; Spring Boot is Needed. docker and docker-compose should be install on your system. </p>
<p><strong>Docker Compose</strong><br>Docker Compose is a tool for defining and running multi-container Docker applications. We define and configure all the services used in application in single file called as “docker-compose.yml” More details about docker compose can be found in <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">documentation</a>. Docker compose helps and reduces lot of overhead of managing apps that has dependancy on multiple containers.<br>Docker compose significantly improves productivity as we can run complete application stack using single command. Docker compose runs all the containers on a single host by default. </p>
<p><strong>Docker Compose in Action</strong><br>I will create simple hypothetical application that will expose rest endpoint to manage fruit information. Application is build using two containers. I will use docker compose to run this multi-container application.<br><img src="/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/docker.png"></p>
<p><strong>Spring Boot APP</strong><br>Create very Spring Spring boot application using <a href="https://start.spring.io/" target="_blank" rel="noopener">Spring initializr</a> use below dependency. <code>spring-boot-starter-web</code>,<code>spring-boot-starter-actuator</code>,<code>lombok</code> and you should be able to run the application.Check <a href="http://localhost:8080/actuator/health" target="_blank" rel="noopener">http://localhost:8080/actuator/health</a> point is returning status as “UP”</p>
<p><strong>Dokcrizeing spring boot app</strong><br>Dockerizing Spring Boot app is very straightforward,below is sample <code>Dockerfile</code> file.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM openjdk:8-jdk-alpine</span><br><span class="line">VOLUME /tmp</span><br><span class="line">ARG JAR_FILE=target/*.jar</span><br><span class="line">COPY $&#123;JAR_FILE&#125; app.jar</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]               </span><br></pre></td></tr></table></figure></p>
<p><strong>Creating Docker Image</strong><br><code>docker build -t api-docker-image .</code><br>Run above command to create docker image. There are maven plugins available for creating docker image during maven build. for simplicity i am using simple docker command to create image.   </p>
<p><strong>Running Docker Image</strong><br><code>docker run -d -p 9090:8080 api-docker-image</code><br>we are mapping 8080 container port to 9090 host machine port means the application will be available on host machine on port 9090. Now Spring boot application  is running on docker and will be available on<br><a href="http://localhost:9090/actuator/health" target="_blank" rel="noopener">http://localhost:9090/actuator/health</a></p>
<p><strong>Now let’s add mongodb</strong><br>Add below dependancy in pom file  </p>
<figure class="highlight xml"><figcaption><span>Pom File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-mongodb<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>                 </span><br></pre></td></tr></table></figure>
<p>Rest endpoints to save and get Fruit information.<br><figure class="highlight java"><figcaption><span>Rest Controller</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> FruitService fruitService;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FruitController</span><span class="params">(FruitService fruitService)</span> </span>&#123;<span class="keyword">this</span>.fruitService = fruitService;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/fruits"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">addFruit</span><span class="params">(@RequestBody FruitRequest fruitRequest)</span> </span>&#123;</span><br><span class="line">        log.info(<span class="string">"Request : &#123;&#125;"</span>, fruitRequest);</span><br><span class="line">        fruitService.saveFruit(fruitRequest.toFruitModel());</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.CREATED).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/fruits"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;FruitModel&gt; <span class="title">getAllFruit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> fruitService.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Simple JPA MongoRepository for saving and getting data to/from mongodb<br><figure class="highlight java"><figcaption><span>JPA Repository & Fruit JPA Model</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FruitRepository</span> <span class="keyword">extends</span> <span class="title">MongoRepository</span>&lt;<span class="title">FruitModel</span> ,<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Document</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Now we want to run mongodb database as <strong>separate container</strong> and spring boot app as separate container application. We can do this manually by running docker commands, But that’s very tedious task and lot of configurations needed for containers to talk to each other. docker compose simplifies these things for us  </p>
<p><strong>Define services in a Compose file</strong><br>We Create a file called docker-compose.yml and starts defining all the containers needed for application as services.<br>in below docker compose file we are defining two services one is for database and one for rest-api and we do all the needed configuration at single place. As our spring boot app (api) is dependent on database we are specifying that as link. There are lof configuration we can do in docker compose file.    </p>
<figure class="highlight yml"><figcaption><span>docker-compose</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  api-database:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="attr">mongo:3.2.4</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">"api-database"</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">27017</span><span class="string">:27017</span></span><br><span class="line"><span class="attr">    command:</span> <span class="bullet">--smallfiles</span></span><br><span class="line"><span class="attr">  api:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">api-docker-image</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">9091</span><span class="string">:8080</span></span><br><span class="line"><span class="attr">    links:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">api-database</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Configure mongodb host name using spring config property using service name defined in docker-compose.<br><figure class="highlight yml"><figcaption><span>docker-compose</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring.data.mongodb.host=api-database</span></span><br></pre></td></tr></table></figure></p>
<p><strong>Running Docker Compose</strong><br><code>docker-compose up</code> single command is needed to start the application. command will create one container for database and one for spring-boot app as defined in docker-compose file.  </p>
<p><strong>Summary</strong> </p>
<p>Using Compose is basically a three-step process:</p>
<ol>
<li><p>Define your app’s environment with a Dockerfile so it can be reproduced anywhere.</p>
</li>
<li><p>Define the services that make up your app in docker-compose.yml so they can be run together in an isolated environment.</p>
</li>
<li><p>Run docker-compose up and Compose starts and runs your entire app.</p>
</li>
</ol>
<p><strong>The code for this post is available on my Github account <a href="https://github.com/nirajsonawane/spring-boot-mongodb-docker-compose-.git" target="_blank" rel="noopener">here</a></strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/" data-id="cl250z73c001cx36b4275h2e0" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/12/16/Spring-Boot-Mongodb-Docker-Compose/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Creating-Custom-Spring-Boot-Starter-To-implement-cross-cutting-concerns" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/10/21/Creating-Custom-Spring-Boot-Starter-To-implement-cross-cutting-concerns/">Creating Custom Spring Boot Starter To Implement Cross-Cutting Concerns</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/10/21/Creating-Custom-Spring-Boot-Starter-To-implement-cross-cutting-concerns/">
            <time datetime="2019-10-21T14:29:52.000Z" itemprop="datePublished">2019-10-21</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Boot/">Spring Boot</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/AOP/">AOP</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Boot-Starter/">Spring Boot Starter</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>Now days Spring Boot has become de facto standard for numerous Web enterprise developments. Spring Boot helps to improve developer’s productivity by implementing lot of cross-cutting concerns as <strong>Starter Projects</strong>. We Just add these dependancy in our projects or configure few properties and <strong>Spring Boot does the magic for us by doing autoconfiguration.</strong> The starters projects automatically configure lof of stuff for us. This helps us to get started more quickly.<br>However, With a lof magic happening in background, it’s very Important to know How things work.    </p>
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-boot-starter.git" target="_blank" rel="noopener">here</a>.</strong></p>
<h3 id="How-Spring-Boot’s-Starter-Works"><a href="#How-Spring-Boot’s-Starter-Works" class="headerlink" title="How Spring Boot’s Starter Works"></a>How Spring Boot’s Starter Works</h3><p>On Startup, Spring Boot checks for <code>spring.factories</code> file. This file is located in the META-INF directory.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">ns.aop.LogMethodExecutionTimeAutoConfiguration                           </span><br></pre></td></tr></table></figure><br>All the classes with <code>@Configuration</code> should list under <code>EnableAutoConfiguration</code> key in the <code>spring.factories</code> file.<br>Spring Will create Beans Based on <code>configuration</code> and <code>Conditions</code> defined in Configurations files. We will see this in detail with example.     </p>
<h3 id="Let’s-Create-Library-That-logs-Method-Execution-Time"><a href="#Let’s-Create-Library-That-logs-Method-Execution-Time" class="headerlink" title="Let’s Create Library That logs Method Execution Time"></a>Let’s Create Library That logs Method Execution Time</h3><blockquote><p>lets imagine, We want to log the method execution time for few methods in our project. We should be able to enable/disable this feature based on some property.</p>
</blockquote>
<h4 id="Creating-Our-Custom-Spring-Boot-Starter-Project"><a href="#Creating-Our-Custom-Spring-Boot-Starter-Project" class="headerlink" title="Creating Our Custom Spring Boot Starter Project"></a>Creating Our Custom Spring Boot Starter Project</h4><p><strong>Create Spring Boot Project with Below dependencies.</strong><br><figure class="highlight xml"><figcaption><span>Pom File</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>		</span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>                       </span><br></pre></td></tr></table></figure><br><code>spring-boot-dependencies</code> allows us to use any Spring dependency.<br><code>spring-boot-autoconfigure</code> for using autoconfigure feature<br><code>spring-boot-configuration-processor</code> to generate metadata for our configuration properties. IDEs can give us autocomplete. </p>
<h4 id="Use-AOP-to-log-method-execution-time"><a href="#Use-AOP-to-log-method-execution-time" class="headerlink" title="Use AOP to log method execution time"></a>Use AOP to log method execution time</h4><p>Create simple annotation <code>LogMethodExecutionTime</code> to be used on method and aspect to log time.  </p>
<figure class="highlight java"><figcaption><span>Annotation & Aspect</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> LogMethodExecutionTime &#123;</span><br><span class="line">&#125;     </span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogMethodExecutionTimeAspect</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"@annotation(LogMethodExecutionTime)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">logExecutionTime</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">final</span> Object proceed = joinPoint.proceed();</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> executionTime = System.currentTimeMillis() - start;</span><br><span class="line">        log.info(joinPoint.getSignature() + <span class="string">" executed in "</span> + executionTime + <span class="string">"ms"</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Creating-Our-Own-Autoconfiguration"><a href="#Creating-Our-Own-Autoconfiguration" class="headerlink" title="Creating Our Own Autoconfiguration"></a>Creating Our Own Autoconfiguration</h4><p>We want to control the <em>Method Execution Time logging</em> to be enable based on certain properties. Spring provides lot of <code>@Conditional</code> annotations.Based on different conditions we can control Configurations of starter projects. For this example we can use <code>ConditionalOnProperty</code>.<br>our starter will be activated only if <code>logging.api.enabled</code> property is present and has value <code>true</code><br><figure class="highlight java"><figcaption><span>Configuration For our Starter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(name = <span class="string">"logging.api.enabled"</span>, havingValue = <span class="string">"true"</span>, matchIfMissing = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogMethodExecutionTimeAutoConfiguration</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  LogMethodExecutionTimeAspect <span class="title">getLogMethodExecutionTimeAspect</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> LogMethodExecutionTimeAspect();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>   </p>
<h4 id="spring-factories-File"><a href="#spring-factories-File" class="headerlink" title="spring.factories File"></a>spring.factories File</h4><p>We need to create special file called as <code>spring.factories</code>. Our custom starter to be pick by Spring boot, we have to create spring.factories. This file should be placed within the src/main/resources/META-INF folder. This file has list of all classes annotated with <code>@Configuration</code>.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">ns.aop.LogMethodExecutionTimeAutoConfiguration                           </span><br></pre></td></tr></table></figure></p>
<p><strong>Note Naming Convention</strong><br>You should make sure to provide a proper namespace for your starter. Do not start your module names with spring-boot, even if you use a different Maven groupId.<br>As a rule of thumb, you should name a combined module after the starter. For example, assume that you are creating a starter for “acme” and that you name the auto-configure module acme-spring-boot-autoconfigure and the starter acme-spring-boot-starter. If you only have one module that combines the two, name it acme-spring-boot-starter.</p>
<h4 id="Using-the-custom-starter"><a href="#Using-the-custom-starter" class="headerlink" title="Using the custom starter"></a>Using the custom starter</h4><p>Let’s create a sample Spring Boot application <code>client</code> to use our custom starter.<br><figure class="highlight java"><figcaption><span>Client</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;ns&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;method-execution-time-logging-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define below property </span></span><br><span class="line">logging.api.enabled=<span class="keyword">true</span></span><br><span class="line"><span class="comment">//Main Class</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(ClientApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function">ApplicationRunner <span class="title">init</span><span class="params">(TestClass testClass)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (ApplicationArguments args) -&gt;  dataSetup(testClass);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dataSetup</span><span class="params">(TestClass testClass)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		testClass.run();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Test Class</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestClass</span> </span>&#123;    </span><br><span class="line">    <span class="meta">@LogMethodExecutionTime</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-boot-starter.git" target="_blank" rel="noopener">here</a>.</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/10/21/Creating-Custom-Spring-Boot-Starter-To-implement-cross-cutting-concerns/" data-id="cl250z72v000dx36baeshdlxp" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/10/21/Creating-Custom-Spring-Boot-Starter-To-implement-cross-cutting-concerns/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/10/21/Creating-Custom-Spring-Boot-Starter-To-implement-cross-cutting-concerns/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/09/13/My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide/">My AWS Solutions Architect Associate Certification Preparation Guide</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/09/13/My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide/">
            <time datetime="2019-09-13T05:53:58.000Z" itemprop="datePublished">2019-09-13</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/AWS/">AWS</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/09/13/My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide/aws.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@benwhitephotography?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Ben White"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Ben White</span></a></p>
<p>I Recently [September 2019 ] Completed AWS Architect Associate Certification in First Attempt with score of 89%. I want to share my experience and exam preparation tips with you.</p>
<h3 id="My-Background-about-AWS-and-Cloud-Technologies"><a href="#My-Background-about-AWS-and-Cloud-Technologies" class="headerlink" title="My Background about AWS and Cloud Technologies"></a>My Background about AWS and Cloud Technologies</h3><p>I had No prior AWS experience or knowledge. But I had previous work experience in Other <em>IaaS</em> Platform. I was well aware about the most of the cloud concepts covered in Exam. It was easy for me to relate the problem and Pain point Any AWS Service was trying to Solve. I think this is very important to understand any AWS Service and motivation behind creating such service. This helped me to understand bigger picture.      </p>
<h3 id="Preparation-Timeline"><a href="#Preparation-Timeline" class="headerlink" title="Preparation Timeline"></a>Preparation Timeline</h3><p>AWS suggest you should have minimum One year of working experience on AWS Platform but it’s not mandatory. When i did my research, Most of the people recommending at lest Three to Four months of study (2 -3 hrs everyday). It’s obvious we cannot generalize this. It depends on individual.</p>
<p> <strong>Please take your time to study and do not rush and Book the Exam. Give yourself enough time</strong>  The platform has more than 140 different services and new services are launching every day. It can be very overwhelming and time consuming trying to understand Services. Architect Associate exam does not cover all Services but it still covers lot.<br>I Personally made mistake by booking exam in advance, Giving myself only three weeks of time for preparation along with my Office work of 8-9 hrs. For last few days i have to push myself to cover all services.</p>
<h3 id="Preparation-Resources"><a href="#Preparation-Resources" class="headerlink" title="Preparation Resources"></a>Preparation Resources</h3><p>I Use <em>Udemy</em> Platform for my regular study, For AWS I took below courses from Udemy.</p>
<p> <strong><a href="https://www.udemy.com/aws-certified-solutions-architect-associate/" target="_blank" rel="noopener">AWS Certified Solutions Architect - Associate 2019. By Ryan Kroonenburg, Faye Ellis</a></strong><br>This is one of the most popular course for CSAA Certification. Content of course is very good and up to date. I will surely recommend this course.<br><strong>I have rated this course as 4.5 Star on Udemy</strong>  </p>
<p><strong><a href="https://www.udemy.com/aws-certified-solutions-architect-associate-saa-c01/" target="_blank" rel="noopener">Ultimate AWS Certified Solutions Architect Associate 2019 by Stephane Maarek</a></strong><br>This is also another very good course. This course provide more details and hands on compare to Ryan course. This was my primary source for preparation.<br>I will definitely recommend this course. <strong>I have rated this course as 5 Star on Udemy</strong>  </p>
<p>**I would Suggest do not rely on any Single Course. Complete at lest two courses of your choice.</p>
<p><strong>Practice Exams</strong><br>Practice Exams are equally Important. I Used below two practice exams. All Exam questions are scenario based, So it’s become very important to prepare your self for such questions. Both the below Practice Exams includes 6 Practice Tests and quality of question is also good. Real Exam also has similar (But Not exact same) questions. <strong>I have rated both these course as 5 Star on Udemy</strong>     </p>
<p>You might not do well in these practice exams. Read the explanation about the answers and repeat the the test again. Due to limited time i was not able to repeat the test.  </p>
<p><strong><a href="https://www.udemy.com/course/aws-certified-solutions-architect-associate-practice-tests-k/" target="_blank" rel="noopener">AWS Certified Solutions Architect Associate Practice Exams by Neal Davis, Digital Cloud Training</a></strong><br>My First Attempt Scores in Test exams 46%,49%,60%,76%,53%,63%. <strong>I Was able to pass only 1 Test in my First Attempt</strong> </p>
<p><strong><a href="https://www.udemy.com/aws-certified-solutions-architect-associate-amazon-practice-exams/" target="_blank" rel="noopener">AWS Certified Solutions Architect Associate Practice Exams By by Jon Bonso, Tutorials Dojo</a></strong><br>My First Attempt Scores in Test exams 75%,75%,68%,80%,86%,75%.  I took these test at last.</p>
<p><strong>FAQ &amp; Whitepaper</strong><br>It is Suggested that You should go through FAQ and White Papers before appearing to exam. I haven’t got time to read any White Papers or FAQ      </p>
<h3 id="Preparation-And-Exam-Tips"><a href="#Preparation-And-Exam-Tips" class="headerlink" title="Preparation And Exam Tips"></a>Preparation And Exam Tips</h3><p>These are not some magical Tips and you must be knowing most of these. Just make sure you check all the boxes.   </p>
<p><strong>Hands on using Free tier</strong> Do not start you preparation considering exam in mind. Do hands on whenever possible and consider it as you are implementing it for any enterprise level application. Exam will test you for such scenario only.</p>
<p><strong>Taking Note</strong> Start taking your notes as soon as possible. Exam covers lot of topics and it’s difficult to remember all stuff. Video tutorial needs lot of time and you might not able to repeat.</p>
<p><strong>Read questions carefully and Take your Time to Understand it</strong> Most of the questions are Descriptive and are up to 3 lines . Try to <strong>Find Keywords like Cost effective,Manage Service, Minimum Configurations,Availability, Durability etc</strong>  Keywords will help to select Most appropriate Option. <strong>First Try to Eliminate Wrong Answer rather than finding correct one</strong></p>
<p><strong>VPC is Very Important</strong><br>VPC is very important from Exam point of view and i got lot of question about VPC.You need to understand  which service should be in a public subnet versus a private subnets And How Services deployed in Private subnets can interact with Internet and other services. </p>
<p><strong>Disaster recovery</strong><br>Disaster recovery also covers good portion of exam. Try to Understand  and memorize how each services works in case of failure, And How to configure services for Disaster recovery.<br>E.g  Does the service backups data, Where it copies, is it automatic or we need to configure it, How failover works etc.</p>
<h3 id="Reality-Check-After-Certification"><a href="#Reality-Check-After-Certification" class="headerlink" title="Reality Check After Certification"></a>Reality Check After Certification</h3><p>Does it mean I am now great cloud architect after Certification?  Of course not :)<br>The real word Enterprise application Brings lof of complexity and different unknown challenges and No exam can test these scenarios.</p>
<p>It’s very important to keep ourself updated with stuff happening around technology space. Any Certification can give me an edge over other candidates While getting job or Can Help me to get better salary But it does not guarantee that I Will be able to solve the Problem.  </p>
<p>I want to become good software architect and getting any such certification is <strong>Just the one Step Forward.</strong>  </p>
<p>Please let me know about your AWS Exam experience and Any tips that  you want to share.  </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/09/13/My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide/" data-id="cl250z736000yx36bdpxmsq9s" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/09/13/My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/09/13/My-AWS-Certified-Solutions-Architect-Associate-Certification-Preparation-Guide/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Securing-Spring-Boot-Microservices-Using-JWT-Token" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/07/14/Securing-Spring-Boot-Microservices-Using-JWT-Token/">Securing Spring Boot Microservices Using JWT Token</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/07/14/Securing-Spring-Boot-Microservices-Using-JWT-Token/">
            <time datetime="2019-07-14T18:36:35.000Z" itemprop="datePublished">2019-07-14</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Boot/">Spring Boot</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/JWT/">JWT</a>, <a class="tag-link" href="/tags/Microservice/">Microservice</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Security/">Spring Security</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/07/14/Securing-Spring-Boot-Microservices-Using-JWT-Token/jr-korpa-DGnYDtphi3o-unsplash.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@korpa?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from JR Korpa"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">JR Korpa</span></a><br>In Last few articles, We Discuss Different aspects of Microservices. In this post we will add Security to our rest services using <strong>Json Web Token And Spring Security</strong><br>There are multiple options available for adding Authentication and Authorization, Today we will be focusing on JSON Web Tokens, or <strong>JWT</strong> in short.</p>
<h3 id="What-Is-JSON-Web-Tokens-JWT"><a href="#What-Is-JSON-Web-Tokens-JWT" class="headerlink" title="What Is JSON Web Tokens (JWT)?"></a>What Is JSON Web Tokens (JWT)?</h3><p>JSON Web Tokens are an open, industry standard <code>RFC 7519</code> method for representing claims securely between two parties. JWT Token has three Parts <strong>Header, Payload &amp; Signature</strong></p>
<p><strong>Header</strong> of the JWT contains information about how the JWT signature should be computed. Header contains information about type and hashing algorithm used.<br><figure class="highlight json"><figcaption><span>Header</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"alg"</span>: <span class="string">"HS256"</span>,</span><br><span class="line">  <span class="attr">"typ"</span>: <span class="string">"JWT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>Payload</strong> contains the data also  referred  as <em>claims</em>. The Internet drafts define the certain standard fields (“claims”) that can be used inside a JWT claim set. Such as Issuer, Subject, Issued at, JWT ID    etc You can Find full list <a href="https://en.wikipedia.org/wiki/JSON_Web_Token#Standard_fields" target="_blank" rel="noopener">Here</a>. We Can also pass  other needed information using private claims.<br><figure class="highlight json"><figcaption><span>Payload</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"sub"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"John Doe"</span>,</span><br><span class="line">  <span class="attr">"iat"</span>: <span class="number">1516239022</span>,</span><br><span class="line">  <span class="attr">"Roles"</span>:<span class="string">"Admin"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </p>
<p> <strong>Signature</strong> Make sure that the token is not changed on the way. Signature is created by taking the header and payload together and passing it through the specified algorithm along with a known secret.</p>
<p> For More Details about JWT Please check <a href="https://jwt.io/introduction/" target="_blank" rel="noopener">jwt.io</a> </p>
<p> <strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Boot-With-JWT-token-example.git" target="_blank" rel="noopener">here</a>.</strong></p>
<h3 id="Sample-Application-Using-JWT-And-Spring-Security"><a href="#Sample-Application-Using-JWT-And-Spring-Security" class="headerlink" title="Sample Application Using JWT And Spring Security"></a>Sample Application Using JWT And Spring Security</h3><p><strong>An overview of the security mechanism that we will be using in our sample application.</strong></p>
<p>Client will call <strong>Authenticate Endpoint</strong> by providing valid Username and Password to get The <code>Token</code><br>Clients will send this JWT token in the Authorization header for all the requests to access any protected resources. For Valid Tokens, Access will be granted to resources.<br>In Case of missing Token or invalid token, Response code <code>401 unauthorized</code> will be return.</p>
<p>We will also Add <strong>Role</strong> Base Authentication. <strong>Student Endpoint</strong> Will be accessible to Users having <code>ADMIN</code>  or <code>USER</code> roles. And <strong>Subject Endpoint</strong> will be accessible to Users having <code>ADMIN</code> roles.</p>
<p><em>This Will be long post, So I divided it into multiple Steps. Github repo has Branch corresponding to each Step</em></p>
<h3 id="Step-1-Create-Spring-Boot-Rest-Endpoints"><a href="#Step-1-Create-Spring-Boot-Rest-Endpoints" class="headerlink" title="Step 1: Create Spring Boot Rest Endpoints"></a>Step 1: Create Spring Boot Rest Endpoints</h3><p>Create Two Simple Rest endpoints For Our <strong>Student</strong> and <strong>Subject</strong> Domain objects. User Login Details are saved in <code>User</code> table using <code>User</code> Entity. </p>
<figure class="highlight java"><figcaption><span>Setting Up Things For playing with jWT</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//Student Resource</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/Student"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentResource</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> StudentRepository studentRepository;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentResource</span><span class="params">(StudentRepository studentRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentRepository=studentRepository;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Subject Resource</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/Subject"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectResource</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SubjectRepository subjectRepository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubjectResource</span><span class="params">(SubjectRepository subjectRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subjectRepository = subjectRepository;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Subject&gt; <span class="title">getAllSubjects</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> subjectRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<p>Add <code>User</code> Entity to Store userId &amp; password in in-memory database. Password are stored in  <code>BCrypt encrypted Format</code></p>
<figure class="highlight java"><figcaption><span>Setting Up Things For playing with jWT</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String role;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<p>Populate Database during application Startup using <code>ApplicationRunner</code><br><figure class="highlight java"><figcaption><span>Setting Up Things For playing with jWT</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GwtTokenApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(GwtTokenApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">	<span class="function">ApplicationRunner <span class="title">init</span><span class="params">(UserRepository userRepository, StudentRepository studentRepository, SubjectRepository subjectRepository)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (ApplicationArguments args) -&gt;  dataSetup(userRepository,studentRepository,subjectRepository);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dataSetup</span><span class="params">(UserRepository userRepository, StudentRepository studentRepository, SubjectRepository subjectRepository)</span> </span>&#123;</span><br><span class="line">		User niraj = <span class="keyword">new</span> User(<span class="string">"niraj.sonawane@gmail.com"</span>, <span class="string">"$2a$10$yRxRYK/s8vZCp.bgmZsD/uXmHjekuPU/duM0iPZw04ddt1ID9H7kK"</span>, <span class="string">"Admin"</span>);</span><br><span class="line">		User test = <span class="keyword">new</span> User(<span class="string">"test@gmail.com"</span>, <span class="string">"$2a$10$YWDqYU0XJwwBogVycbfPFOnzU7vsG/XvAyQlrN34G/oA1SbhRW.W."</span>, <span class="string">"User"</span>);</span><br><span class="line">		userRepository.save(niraj);</span><br><span class="line">		userRepository.save(test);</span><br><span class="line"></span><br><span class="line">		Student student1 = <span class="keyword">new</span> Student(<span class="number">1L</span>,<span class="string">"Ram"</span>);</span><br><span class="line">		Student student2 = <span class="keyword">new</span> Student(<span class="number">2L</span>,<span class="string">"Sham"</span>);</span><br><span class="line">		studentRepository.save(student1);</span><br><span class="line">		studentRepository.save(student2);</span><br><span class="line"></span><br><span class="line">		Subject math = <span class="keyword">new</span> Subject(<span class="number">1l</span>,<span class="string">"Math"</span>);</span><br><span class="line">		Subject science = <span class="keyword">new</span> Subject(<span class="number">2l</span>,<span class="string">"Science"</span>);</span><br><span class="line">		subjectRepository.save(math);</span><br><span class="line">		subjectRepository.save(science);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>At This point, We have Setup Two Reset endpoints and User Table to Store UserID and Password. </p>
<h3 id="Step-2-Add-Authentication-Endpoint-To-Return-JWT-Token-and-Secure-All-Other-Endpoint"><a href="#Step-2-Add-Authentication-Endpoint-To-Return-JWT-Token-and-Secure-All-Other-Endpoint" class="headerlink" title="Step 2: Add  Authentication Endpoint To Return JWT Token and Secure All Other Endpoint"></a>Step 2: Add  Authentication Endpoint To Return JWT Token and Secure All Other Endpoint</h3><p><code>Student</code> and <code>Subject</code> endpoints should be accessible only if Valid token is provided. <code>Authenticate</code> endpoint Should be accessible to everyone.<br><figure class="highlight java"><figcaption><span>SecurityConfig</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span>  <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserAuthDetailsService userAuthDetailsService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> InvalidLoginAttemptHandler invalidLoginAttemptHandler;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder authenticationManagerBuilder)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        authenticationManagerBuilder.userDetailsService(userAuthDetailsService)</span><br><span class="line">                .passwordEncoder(passwordEncoder());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuthenticationManager <span class="title">authenticationManagerBean</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.authenticationManagerBean();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        http</span><br><span class="line">                .cors().and().csrf().disable()</span><br><span class="line">                .exceptionHandling().authenticationEntryPoint(invalidLoginAttemptHandler)</span><br><span class="line">                .and()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">"/authenticate/**"</span>)</span><br><span class="line">                .permitAll()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>lets discuss, What Configurations we have done here. </p>
<p><code>@EnableWebSecurity</code> This is main Spring annotation that is used to enable web security in a project.  </p>
<p><code>WebSecurityConfigurerAdapter</code> This class provides default security configurations and allows other classes to extend it and customize the security configurations by overriding its methods.</p>
<p><code>UserAuthDetailsService</code> - This class is needed by Spring security to get the user details from Database, LDAP or other other user store.<code>UserAuthDetailsService</code> Service loads the user details from our <code>User</code> Table.</p>
<p><code>AuthenticationManager</code> This class uses <code>UserAuthDetailsService</code> to do user Authentication.</p>
<p><code>InvalidLoginAttemptHandler</code> This class is responsible for taking action if Authentication fails. </p>
<p><code>.antMatchers(&quot;/authenticate/**&quot;).permitAll().anyRequest().authenticated()</code> This Configuration allows any user to access our <code>authenticate</code> endpoint and  all other Request need to be authenticated.</p>
<p><strong>Authenticate User and Create JWT Token</strong><br><figure class="highlight java"><figcaption><span>AuthResource</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/authenticate"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthResource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationManager authenticationManager;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JWTTokenProvider jwtTokenProvider;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">authenticateUser</span><span class="params">(@RequestBody AuthenticateRequest authenticateRequest)</span> </span>&#123;</span><br><span class="line">        Authentication authentication = authenticationManager.authenticate(<span class="keyword">new</span> UsernamePasswordAuthenticationToken(authenticateRequest.getUserName(), authenticateRequest.getPassword()));</span><br><span class="line">        String token =jwtTokenProvider.generateToken((UserPrincipal)authentication.getPrincipal());</span><br><span class="line">        log.info(<span class="string">"Token Created &#123;&#125;"</span>,token);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(<span class="keyword">new</span> JwtAuthenticationResponse(token));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </p>
<figure class="highlight java"><figcaption><span>JWTTokenProvider</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTTokenProvider</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jwt.secret&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String jwtSecret;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jwt.expirationInMs&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> jwtExpirationInMs;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">generateToken</span><span class="params">(UserPrincipal userPrincipal)</span></span>&#123;</span><br><span class="line">        List&lt;String&gt; roles = userPrincipal</span><br><span class="line">                .getAuthorities()</span><br><span class="line">                .stream()</span><br><span class="line">                .map(GrantedAuthority::getAuthority)</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        <span class="keyword">return</span>  Jwts.builder().setIssuer(<span class="string">"Demo App"</span>)</span><br><span class="line">                       .setIssuedAt(<span class="keyword">new</span> Date())</span><br><span class="line">                        .setExpiration(<span class="keyword">new</span> Date(<span class="keyword">new</span> Date().getTime() + jwtExpirationInMs))</span><br><span class="line">                        .claim(<span class="string">"Roles"</span>,roles)</span><br><span class="line">                        .signWith(SignatureAlgorithm.HS512,jwtSecret).compact();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<p>After successful authentication of User we create JWT Token using <code>jsonwebtoken</code> library. jsonwebtoken provides fluent api to create JWT Token.<br>We are Adding <code>Roles</code> in Claim. We Can Use these role for role based authorization.<br>In Case authentication fails, <code>InvalidLoginAttemptHandler</code> Will be called which we have configured in <code>exceptionHandling</code> section of our <code>SecurityConfig</code>. </p>
<p>Now If we Call authenticate endpoints with Valid userid and password, JWT Token will send back in Response.  </p>
<p><code>curl -X POST http://localhost:8080/authenticate -H &quot;Content-Type:application/json&quot; -d &quot;{\&quot;userName\&quot;:\&quot;niraj.sonawane@gmail.com\&quot;,\&quot;password\&quot;:\&quot;test\&quot;}&quot;</code></p>
<h3 id="Step-3-Add-AuthenticationFilter-To-Get-JWT-token-from-the-request-and-Validate-It"><a href="#Step-3-Add-AuthenticationFilter-To-Get-JWT-token-from-the-request-and-Validate-It" class="headerlink" title="Step 3: Add  AuthenticationFilter To Get JWT token from the request and Validate It"></a>Step 3: Add  AuthenticationFilter To Get JWT token from the request and Validate It</h3><p>After receiving  jwt token, Clients Need to pass this token in <code>Authorization</code> header to access the protected resource, in our case student or subject resource.<br>Sample curl for same<br><figure class="highlight plain"><figcaption><span>curl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET http://localhost:8080/Subject -H &quot;Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJEZW1vIEFwcCIsInN1YiI6InRlc3RAZ21haWwuY29tIiwiaWF0IjoxNTYzMTAwODk2LCJleHAiOjE1NjMxNTA4OTYsIlJvbGVzIjpbIlJPTEVfVVNFUiJdfQ.XSUpdBhRkXL0b1U5gD0y-siCrSMMzQaJupV4bJOTnAA7txYmDNTZ8O18ueCG72K7XdwueLZGXWX5C2NtCWghaA&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </p>
<p><code>JwtAuthenticationFilter</code> Filter will be called  OncePerRequest and will validate the provided token. After Successful Validation of Token We need to pass on <code>UsernamePasswordAuthenticationToken</code> to filter chain using <code>SecurityContextHolder</code><br><figure class="highlight java"><figcaption><span>JwtAuthenticationFilter</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JwtAuthenticationFilter</span> <span class="keyword">extends</span> <span class="title">OncePerRequestFilter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JWTTokenProvider tokenProvider;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserAuthDetailsService userDetailsService;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        logger.info(<span class="string">"Validating Token!!!!!"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            String jwt = getJwtFromRequest(request);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.hasText(jwt) &amp;&amp; tokenProvider.validateToken(jwt)) &#123;</span><br><span class="line">                logger.info(<span class="string">"Token is Valid "</span>);</span><br><span class="line">                String userNameFromToken = tokenProvider.getUserNameFromToken(jwt);</span><br><span class="line">                UserPrincipal userDetails = userDetailsService.loadUserByUsername(userNameFromToken);</span><br><span class="line">                UsernamePasswordAuthenticationToken authentication = <span class="keyword">new</span> UsernamePasswordAuthenticationToken(userDetails, <span class="keyword">null</span>, userDetails.getAuthorities());</span><br><span class="line">                SecurityContextHolder.getContext().setAuthentication(authentication);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            logger.error(<span class="string">"Could not set user authentication in security context"</span>, ex);</span><br><span class="line">        &#125;</span><br><span class="line">        filterChain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getJwtFromRequest</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        String bearerToken = request.getHeader(<span class="string">"Authorization"</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(<span class="string">"Bearer "</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> bearerToken.substring(<span class="number">7</span>, bearerToken.length());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </p>
<p>Token Can be validated like this<br> <code>Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(jwt)</code></p>
<p> At This point, We are able to Create JWT Token for valid Users. And able to provide access to protected resources based on token. </p>
<p> lets go one step further and use roles to  grant access at granular level.</p>
<h3 id="Step-4-Role-Based-Access"><a href="#Step-4-Role-Based-Access" class="headerlink" title="Step 4: Role Based Access"></a>Step 4: Role Based Access</h3><p> lets Say we want <strong>Student Endpoint</strong> to be accessible to Users having <code>ADMIN</code>  or <code>USER</code> roles. And <strong>Subject Endpoint</strong> to be accessible to Users having <code>ADMIN</code> role.<br> In order to use method level security, we need to enable this in the security configuration using <code>@EnableGlobalMethodSecurity</code>. </p>
 <figure class="highlight java"><figcaption><span>Configuration</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(</span><br><span class="line">  prePostEnabled = <span class="keyword">true</span>, </span><br><span class="line">  securedEnabled = <span class="keyword">true</span>, </span><br><span class="line">  jsr250Enabled = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodSecurityConfig</span>  <span class="keyword">extends</span> <span class="title">GlobalMethodSecurityConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<p>The annotations <code>@PreAuthorize</code> and <code>@PostAuthorize</code> support Spring Expression Language (SpEL) and provide expression-based access control.<br>Note: The Roles In Database need to saved with Prefix as <em>ROLE_</em><br><figure class="highlight java"><figcaption><span>StudentResource</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/Student"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentResource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> StudentRepository studentRepository;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentResource</span><span class="params">(StudentRepository studentRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.studentRepository=studentRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@PreAuthorize</span>(<span class="string">"hasRole('ADMIN') OR hasRole('USER')"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">getAllStudents</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </p>
<figure class="highlight java"><figcaption><span>SubjectResource</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/Subject"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectResource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SubjectRepository subjectRepository;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubjectResource</span><span class="params">(SubjectRepository subjectRepository)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subjectRepository = subjectRepository;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="meta">@PreAuthorize</span>(<span class="string">"hasRole('ADMIN')"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Subject&gt; <span class="title">getAllSubjects</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> subjectRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>     
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Boot-With-JWT-token-example.git" target="_blank" rel="noopener">here</a>.</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/07/14/Securing-Spring-Boot-Microservices-Using-JWT-Token/" data-id="cl250z7390015x36bby3naoip" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/07/14/Securing-Spring-Boot-Microservices-Using-JWT-Token/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/07/14/Securing-Spring-Boot-Microservices-Using-JWT-Token/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/">Setup Monitoring System for your Spring Boot applications Using Spring Boot Admin</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/">
            <time datetime="2019-06-08T09:13:22.000Z" itemprop="datePublished">2019-06-08</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Cloud/">Spring Cloud</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Microservice/">Microservice</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Boot-Admin/">Spring Boot Admin</a>, <a class="tag-link" href="/tags/Spring-Cloud/">Spring Cloud</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/zdenek-machacek-1415290.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@zmachacek?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Zdeněk Macháček"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Zdeněk Macháček</span></a></p>
<p>In past few microservices articles, We discuss different Spring Cloud features.In microservices architecture we have lot of services doing small small tasks. Monitoring all these application becomes very critical and integral part of your technology stack.<br><a href="https://github.com/codecentric/spring-boot-admin" target="_blank" rel="noopener"><strong>Spring Boot Admin</strong></a> is Community project provides an admin interface for Spring Boot applications.<br>let check how we can setup and use Spring Boot Admin.   </p>
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Boot-Admin-demo" target="_blank" rel="noopener">here</a>.</strong></p>
<h3 id="Setting-Up-Spring-Boot-Admin-Server"><a href="#Setting-Up-Spring-Boot-Admin-Server" class="headerlink" title="Setting Up Spring Boot Admin Server"></a>Setting Up Spring Boot Admin Server</h3><p>To Add admin server in project we need to add below spring boot starter dependancy    </p>
<figure class="highlight"><figcaption><span>spring boot admin starter server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  &lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;de.codecentric&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-boot-admin-starter-server&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>Add <code>@EnableAdminServer</code> on Main Application.<br><figure class="highlight java"><figcaption><span>Admin Main Class</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAdminServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBootAdminServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(SpringBootAdminServerApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Now if we Start the application, the admin UI should be available<br><img src="/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/admin1.png"></p>
<h3 id="Register-clients-with-admin-Server"><a href="#Register-clients-with-admin-Server" class="headerlink" title="Register clients with admin Server"></a>Register clients with admin Server</h3><p>Each application that wants to register has to include the Spring Boot Admin Client dependancy.<br><figure class="highlight"><figcaption><span>Client</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  &lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;de.codecentric&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p>
<p>And add <strong>Admin.client</strong> url in <code>application.properties</code><br><code>spring.boot.admin.client.url=http://localhost:8080/</code><br>Spring Boot Admin will use <code>spring.application.name</code> property to display the name of application.<br> <video width="700" height="700" controls autoplay><br>  <source src="/asset/1.webm" type="video/webm"><br>Your browser does not support the video tag.<br></video><br> Our application is registered on Admin Consol, <strong>But apart for Status no other information is available</strong></p>
<h3 id="Magic-of-Spring-Boot-Actuator-and-Spring-Boot-Admin-Server"><a href="#Magic-of-Spring-Boot-Actuator-and-Spring-Boot-Admin-Server" class="headerlink" title="Magic of Spring Boot Actuator and  Spring Boot Admin Server"></a>Magic of Spring Boot Actuator and  Spring Boot Admin Server</h3><p> Spring Boot Admin depends on Actuators endpoints to provide information. let’s enable Actuator endpoints.<br> put below in client application.<br> <code>management.endpoints.web.exposure.include=*</code><br> <strong>Note</strong>, Expose only needed endpoints.<br> <video width="700" height="700" controls autoplay><br>  <source src="/asset/admin2.webm" type="video/webm"><br>Your browser does not support the video tag.<br></video> </p>
<h3 id="Tips-and-tricks"><a href="#Tips-and-tricks" class="headerlink" title="Tips and tricks"></a>Tips and tricks</h3><p><strong>Display Build Info</strong><br>To Display Build Info, Simply add <strong>build-info</strong> Goal in <code>spring-boot-maven-plugin</code> plugin<br><figure class="highlight"><figcaption><span>Build Info</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  &lt;build&gt;</span><br><span class="line">	&lt;plugins&gt;</span><br><span class="line">		&lt;plugin&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">			&lt;executions&gt;</span><br><span class="line">				&lt;execution&gt;</span><br><span class="line">					&lt;goals&gt;</span><br><span class="line">						&lt;goal&gt;build-info&lt;/goal&gt;</span><br><span class="line">					&lt;/goals&gt;</span><br><span class="line">				&lt;/execution&gt;</span><br><span class="line">			&lt;/executions&gt;</span><br><span class="line">		&lt;/plugin&gt;			</span><br><span class="line">	&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>Display Git Commit info</strong><br>To know which commit id is deployed, We can simply use <code>git-commit-id-plugin</code>, git information will be available in info endpoint and will be displayed on admin ui.<br><figure class="highlight"><figcaption><span>Build Info</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  &lt;build&gt;</span><br><span class="line">	&lt;plugins&gt;</span><br><span class="line">		&lt;plugin&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">			&lt;executions&gt;</span><br><span class="line">				&lt;execution&gt;</span><br><span class="line">					&lt;goals&gt;</span><br><span class="line">						&lt;goal&gt;build-info&lt;/goal&gt;</span><br><span class="line">					&lt;/goals&gt;</span><br><span class="line">				&lt;/execution&gt;</span><br><span class="line">			&lt;/executions&gt;</span><br><span class="line">		&lt;/plugin&gt;</span><br><span class="line">		&lt;plugin&gt;</span><br><span class="line">			&lt;groupId&gt;pl.project13.maven&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;git-commit-id-plugin&lt;/artifactId&gt;</span><br><span class="line">		&lt;/plugin&gt;			</span><br><span class="line">	&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><br><strong>Logs</strong><br>By default the log file is not accessible via actuator endpoints and therefore not visible in Spring Boot Admin. In order to enable the logfile actuator endpoint you need to configure Spring Boot to write a <code>logfile</code>, either by setting logging.path or logging.file.<br>Add below property in Client application.<br><code>logging.file=target/sample-boot-application.log</code><br><em>At run time we can also change the logs level</em>, Which is useful in lower environments.<br><strong>Multiple Instance</strong><br>Admin Will Automatically Group applications based on application names and will show consolidated view.<br><strong>Tags</strong><br>Tags are a way to add visual markers per instance, they will appear in the application list as well as in the instance view.<br><code>spring.boot.admin.client.instance.metadata.tags.environment=QA</code></p>
<video width="700" height="700" controls autoplay><br>  <source src="/asset/admin3.webm" type="video/webm"><br>Your browser does not support the video tag.<br></video> 

<h2 id="Notification"><a href="#Notification" class="headerlink" title="Notification"></a>Notification</h2><p>By default Spring Boot Admin will send registered application changes to DOWN or OFFLINE. We can do lot of customizations for Notifications.<br>Below is configurations for sending emails using google smpt server.<br>Use <code>spring-boot-starter-mail</code> dependancy in admin.<br><figure class="highlight java"><figcaption><span>Email Config in Admin</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.mail.host=smtp.gmail.com</span><br><span class="line">spring.mail.port=<span class="number">587</span></span><br><span class="line">spring.mail.username=XYZ<span class="meta">@gmail</span>.com</span><br><span class="line">spring.mail.password=XYZ</span><br><span class="line">spring.boot.admin.notify.mail.to=XYZ</span><br><span class="line">spring.mail.properties.mail.smtp.starttls.enable=<span class="keyword">true</span>   </span><br></pre></td></tr></table></figure></p>
<h2 id="Discovery-Clients"><a href="#Discovery-Clients" class="headerlink" title="Discovery Clients"></a>Discovery Clients</h2><p>The Spring Boot Admin Server can use Spring Clouds DiscoveryClient to discover applications. The advantage is that the clients don’t have to include the <code>spring-boot-admin-starter-client</code>. You just have to add a DiscoveryClient implementation to your admin server - everything else is done by AutoConfiguration.</p>
<h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><p>As Admin Server is an spring boot application, Securing admin server is same as securing normal spring boot application.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="http://codecentric.github.io/spring-boot-admin/current/#_what_is_spring_boot_admin" target="_blank" rel="noopener">Documentation</a><br><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Boot-Admin-demo" target="_blank" rel="noopener">here</a>.</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/" data-id="cl250z7390016x36ba1wmdulx" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/06/08/Setup-Monitoring-System-for-your-Spring-Boot-applications-Using-Spring-Boot-Admin/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/">Service Discovery and Registration Using Spring Cloud Eureka</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/">
            <time datetime="2019-04-20T12:37:32.000Z" itemprop="datePublished">2019-04-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Cloud/">Spring Cloud</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Eureka/">Eureka</a>, <a class="tag-link" href="/tags/Microservice/">Microservice</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Cloud/">Spring Cloud</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/fo-fa-1365957-unsplash.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@foad08?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Fo Fa"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Fo Fa</span></a></p>
<p>In past few microservices articles, We discuss different Spring Cloud features, Like  <a href="https://nirajsonawane.github.io/2019/02/17/Centralize-Configurations-Using-Spring-Cloud-Config/">Config Server</a> , <a href="https://nirajsonawane.github.io/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/">OpenFeign</a> and <a href="https://nirajsonawane.github.io/2019/03/22/Spring-Cloud-Netflix-Ribbon/">Ribbon</a>. In this Post, Let’s talk about <strong>Spring Cloud Netflix – Eureka</strong>.Why we need it ?  How to configure the Eureka server , How to register service in  Registry Server?</p>
<p>In cloud based microservices environment, Servers come and go. Unlike the traditional architecture which work with servers with well known IP addresses and host names. In cloud platform,  It is  not possible to know the IP and Host names of services. Also the containers use dynamic IPs for autoscaling moreover Load balancing requires much more sophistication in registering and de-registering servers for balancing.<br><em>So we can  not have  tight coupling between the services based of IP or Host Names.</em>  <strong>Spring Cloud Netflix – Eureka</strong> helps to solve that problem. </p>
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/ServiceDiscoverySpringCloudEurekaDemo" target="_blank" rel="noopener">here</a>.</strong></p>
<p>In typical Eureka setup we have<br><strong>Eureka Server</strong>: Which acts as service registry.<br><strong>Eureka Client</strong> REST services which registers itself at the registry.</p>
<p>let’s Setup Eureka Server &amp; Client for our demo application.</p>
<p><strong>Demo Application:</strong> Our Simple <code>PricingService</code> calculates Price for the Product. Pricing Service gets some dynamic discount details from <code>DiscountService</code>.<br><img src="/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/Flow.png"></p>
<h3 id="Setting-Up-Eureka-Server"><a href="#Setting-Up-Eureka-Server" class="headerlink" title="Setting Up Eureka Server"></a>Setting Up Eureka Server</h3><p>To Add Eureka Server in project, we need to use the <code>spring-cloud-starter-netflix-eureka-server</code> artifact  id. and use <code>@EnableEurekaServer</code> on main class.<br> Eureka server can also register it’s self as a Eureka client. For the demo we will disable that using <code>registerWithEureka</code> flag. Eureka Server can be configured to read configuration from <strong>Config server</strong> that we discuss <a href="https://nirajsonawane.github.io/2019/02/17/Centralize-Configurations-Using-Spring-Cloud-Config/">Here</a>. this property can be set using <code>fetchRegistry</code> flag.<br><figure class="highlight java"><figcaption><span>Eureka Server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(EurekaServerApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><figcaption><span>Eureka Server Properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#Server Specifics</span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">8761</span></span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: eureka-server</span><br><span class="line">#Eureka Specifics</span><br><span class="line">eureka:</span><br><span class="line">  instance:</span><br><span class="line">    hostname: localhost</span><br><span class="line">  client:</span><br><span class="line">    registerWithEureka: <span class="keyword">false</span></span><br><span class="line">    fetchRegistry: <span class="keyword">false</span></span><br><span class="line">    serviceUrl:</span><br><span class="line">      defaultZone: http:<span class="comment">//$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/      </span></span><br></pre></td></tr></table></figure></p>
<p>Start the <code>EurekaServerApplication</code> and you should be able to see Eureka dashboard at <a href="http://localhost:8761/" target="_blank" rel="noopener">http://localhost:8761/</a></p>
<h3 id="Setting-Up-Eureka-Clients-Discount-Service"><a href="#Setting-Up-Eureka-Clients-Discount-Service" class="headerlink" title="Setting Up Eureka Clients - Discount Service"></a>Setting Up Eureka Clients - Discount Service</h3><p>let’s Setup Discount Service to register with Eureka Server. To include the Eureka Client in project we need to use <code>spring-cloud-starter-netflix-eureka-client</code> artifact ID.Spring Boot will identify the client jar in classpath and will try to register with Server. We can also use <code>@EnableDiscoveryClient</code> to do that. We need to provide information about the Eureka Server, This can be done using  <code>serviceUrl</code> property.<br>Discount service has simple endpoint that returns the discount for product.<br><figure class="highlight java"><figcaption><span>Discount Service</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountServiceApplication</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(DiscountServiceApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/discount/&#123;product&#125;"</span>)</span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiscountController</span></span>&#123;</span><br><span class="line">	<span class="meta">@GetMapping</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDiscountPercentage</span><span class="params">(@PathVariable(<span class="string">"product"</span>)</span> String product)</span>&#123;</span><br><span class="line">		log.info(<span class="string">"Getting Discount for Product &#123;&#125;"</span>,product);</span><br><span class="line">		<span class="keyword">return</span>  <span class="number">50</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><figcaption><span>Discount Service properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: discount-service</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">8081</span></span><br><span class="line">  </span><br><span class="line">eureka:</span><br><span class="line">  client:</span><br><span class="line">    healthcheck:</span><br><span class="line">      enabled: <span class="keyword">true</span></span><br><span class="line">    serviceUrl:</span><br><span class="line">      defaultZone: http:<span class="comment">//localhost:8761/eureka/  </span></span><br></pre></td></tr></table></figure></p>
<p>Start the <code>DiscountServiceApplication</code> and you should be able to see <code>DiscountService</code> registered on Eureka dashboard <a href="http://localhost:8761/" target="_blank" rel="noopener">http://localhost:8761/</a><br><strong>Note</strong> Application Name is very important as it is used for server for lookups</p>
<h3 id="Magic-of-Registry-Calling-Service-using-Registry-amp-Feign"><a href="#Magic-of-Registry-Calling-Service-using-Registry-amp-Feign" class="headerlink" title="Magic of Registry: Calling Service using Registry &amp; Feign"></a>Magic of Registry: Calling Service using Registry &amp; Feign</h3><p>Now Let’s Call <code>DiscountService</code> to calculate price. Now as <code>DiscountService</code> is registered with Registry so we don’t need to know the <code>host</code> details.I have already discusses in details about Feign and how to use to call service in this <a href="https://nirajsonawane.github.io/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/">Post</a>.  Feign works with <code>eureka-client</code> and we can call service using <code>application.name</code>. In below code snippet  <code>DiscountServiceClient</code> is a <code>FeignClient</code> Which is calling service using  registered application name. </p>
<figure class="highlight java"><figcaption><span>Pricing Service</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PricingServiceApplication</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(PricingServiceApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ServiceInstanceRestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DiscountServiceClient discountServiceClient;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/price/&#123;product&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Int  <span class="title">getPriceForProduct</span><span class="params">(@PathVariable(<span class="string">"product"</span>)</span> String product) </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> discount = discountServiceClient.getDiscountPercentage(<span class="string">"Test"</span>);</span><br><span class="line">      <span class="keyword">int</span> price = <span class="number">100</span>;</span><br><span class="line">      s = <span class="number">100</span>-discount</span><br><span class="line">     log.info(<span class="string">"Discount is &#123;&#125;"</span>,discount);</span><br><span class="line">      <span class="keyword">return</span> (s*price)/<span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient</span>(<span class="string">"discount-service"</span>)</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">DiscountServiceClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.GET, value = <span class="string">"/discount/&#123;product&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getDiscountPercentage</span><span class="params">(@PathVariable(<span class="string">"product"</span>)</span> String product)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>Pricing Service properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: pricing-service</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line">  port: <span class="number">8080</span></span><br><span class="line">  </span><br><span class="line">eureka:</span><br><span class="line">  client:</span><br><span class="line">    healthcheck:</span><br><span class="line">      enabled: <span class="keyword">true</span></span><br><span class="line">    serviceUrl:</span><br><span class="line">      defaultZone: http:<span class="comment">//localhost:8761/eureka/  </span></span><br></pre></td></tr></table></figure>
<h3 id="What-about-Load-Balancing"><a href="#What-about-Load-Balancing" class="headerlink" title="What about Load  Balancing ?"></a>What about Load  Balancing ?</h3><p>I have already discusses how to use and setup <strong>Ribbon</strong> for Client-side load balancing in this <a href="https://nirajsonawane.github.io/2019/03/22/Spring-Cloud-Netflix-Ribbon/">Post</a>. Feign already uses Ribbon, so, if you use <code>@FeignClient</code> Ribbon will be used along with that. When Eureka is used in conjunction with Ribbon (that is, both are on the classpath), the <strong>ribbonServerList</strong> is overridden with an extension of <strong>DiscoveryEnabledNIWSServerList, which populates the list of servers from Eureka</strong><br>if we start multiple instances of discount service then Ribbon will discount service in round robin algorithm.  </p>
<h3 id="Final-Architecture-of-Application-will-be-like-this"><a href="#Final-Architecture-of-Application-will-be-like-this" class="headerlink" title="Final Architecture of Application will be like this"></a>Final Architecture of Application will be like this</h3><img src="/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/block.jpg">
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/ServiceDiscoverySpringCloudEurekaDemo" target="_blank" rel="noopener">here</a>.</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/" data-id="cl250z73a0017x36b2ak3s9rg" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/04/20/Service-Discovery-and-Registration-Using-Spring-Cloud-Eureka/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Spring-Cloud-Netflix-Ribbon" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/03/22/Spring-Cloud-Netflix-Ribbon/">Spring Cloud Netflix Ribbon</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/03/22/Spring-Cloud-Netflix-Ribbon/">
            <time datetime="2019-03-22T20:45:52.000Z" itemprop="datePublished">2019-03-22</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Cloud/">Spring Cloud</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Microservice/">Microservice</a>, <a class="tag-link" href="/tags/Ribbon/">Ribbon</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Cloud/">Spring Cloud</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/03/22/Spring-Cloud-Netflix-Ribbon/jeremy-thomas-75753-unsplash.jpg">
<h3 id="What-is-Ribbon"><a href="#What-is-Ribbon" class="headerlink" title="What is Ribbon?"></a>What is Ribbon?</h3><p>Ribbon is a client-side load balancer that gives you a lot of control over the behavior of HTTP and TCP clients. <strong>Ribbon  is aware of multiple instances of a service and chooses a particular instance of it. One advantage of this is client controls the load balancing algorithm.</strong></p>
<p>Ribbon Works with <a href="https://nirajsonawane.github.io/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/">Feign</a> That we discussed in last post.</p>
<p><strong>The Code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Cloud-Ribbon-Demo" target="_blank" rel="noopener">here</a>.</strong></p>
<h3 id="Demo-Application"><a href="#Demo-Application" class="headerlink" title="Demo Application"></a>Demo Application</h3><p>Our Simple <code>HelloService</code> Returns String <em>Hello Message From Server: {port_number}</em>. We will launch multiple instance of <code>HelloService</code>. Our Ribbon Client will call <code>HelloService</code> in Round-Robin way.     </p>
<figure class="highlight java"><figcaption><span>HelloService</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/helloworld"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment environment;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String port = environment.getProperty(<span class="string">"local.server.port"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello Message From Server "</span> + port;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<h3 id="Getting-Started-With-Spring-Cloud-Netflix-Ribbon"><a href="#Getting-Started-With-Spring-Cloud-Netflix-Ribbon" class="headerlink" title="Getting Started With Spring Cloud Netflix Ribbon"></a>Getting Started With Spring Cloud Netflix Ribbon</h3><p>To include Ribbon in project We need to use artifact id spring-cloud-starter-netflix-ribbon<br><figure class="highlight"><figcaption><span>netflix-ribbon Maven</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">     &lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="Update-FeignClient-to-use-Ribbon-Load-Balancing"><a href="#Update-FeignClient-to-use-Ribbon-Load-Balancing" class="headerlink" title="Update FeignClient to use Ribbon Load Balancing"></a>Update FeignClient to use Ribbon Load Balancing</h3><figure class="highlight java"><figcaption><span>FeignClient With Ribbon</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(name = <span class="string">"hello"</span>, configuration = HelloClientConfig.class)</span><br><span class="line"><span class="meta">@RibbonClient</span>(name = <span class="string">"hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">HelloClient</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.GET, value = <span class="string">"/helloworld"</span>)</span><br><span class="line">    <span class="function">String <span class="title">getMessage</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 
<p>A central concept in Ribbon is that of the named client. We Provide the application name in<br><code>application.properties</code>.<br><strong>application-name.ribbon.listOfServers</strong> Property is used to provide list of Servers.<br><figure class="highlight java"><figcaption><span>application.properties</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=hello</span><br><span class="line">hello.ribbon.listOfServers: localhost:<span class="number">8080</span>,localhost:<span class="number">8081</span></span><br></pre></td></tr></table></figure> </p>
<h3 id="Test-Application"><a href="#Test-Application" class="headerlink" title="Test Application"></a>Test Application</h3><ol>
<li>Start HelloService on port 8080 and 8081. </li>
<li>Start Client Application on 8083.<br>Then Go to <a href="http://localhost:8083/ribbon-test-client/" target="_blank" rel="noopener">http://localhost:8083/ribbon-test-client/</a><br>first time it should return message as <em>“Hello Message From Server 8080”</em> and next time as <em>“Hello Message From Server 8081”</em></li>
</ol>
<p><strong>The Code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Cloud-Ribbon-Demo" target="_blank" rel="noopener">here</a>.</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/03/22/Spring-Cloud-Netflix-Ribbon/" data-id="cl250z73c001dx36bex63kd0p" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/03/22/Spring-Cloud-Netflix-Ribbon/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/03/22/Spring-Cloud-Netflix-Ribbon/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/">Simplifying Microservices Communication Using Spring Cloud OpenFeign</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/">
            <time datetime="2019-03-21T19:06:41.000Z" itemprop="datePublished">2019-03-21</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fas fa-folder"></i>
        <a class="article-category-link" href="/categories/Spring-Cloud/">Spring Cloud</a>
    </div>

                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Microservice/">Microservice</a>, <a class="tag-link" href="/tags/OpenFeign/">OpenFeign</a>, <a class="tag-link" href="/tags/Spring-Boot/">Spring Boot</a>, <a class="tag-link" href="/tags/Spring-Cloud/">Spring Cloud</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <img src="/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/pavan-trikutam-1660-unsplash.jpg">
<p><a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px" href="https://unsplash.com/@ptrikutam?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge" target="_blank" rel="noopener noreferrer" title="Download free do whatever you want high-resolution photos from Pavan Trikutam"><span style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg" style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white" viewbox="0 0 32 32"><title>unsplash-logo</title><path d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"/></svg></span><span style="display:inline-block;padding:2px 3px">Pavan Trikutam</span></a></p>
<h3 id="What-is-Feign"><a href="#What-is-Feign" class="headerlink" title="What is Feign?"></a>What is Feign?</h3><p>Feign is a Java to HTTP client binder. Feign Simpliffyes the HTTP API Clients using declarative way.<br>Feign is a library for creating REST API clients in a declarative way. it makes writing web service clients easier. Developers can use declarative annotations to call rest servicese instead of  writing repetitive boilerplate code.  </p>
<p><strong>Spring Cloud OpenFeign</strong> provides OpenFeign integrations for Spring Boot apps through autoconfiguration and binding to the Spring Environment and other Spring programming model idioms</p>
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Cloud-Feign-Demo" target="_blank" rel="noopener">here</a>.</strong></p>
<p><strong>Demo Application</strong><br>We Have Simple User Service that provides crud operations for Users. We will write client to call these rest endpoints.     </p>
<h3 id="Why-Feign"><a href="#Why-Feign" class="headerlink" title="Why Feign?"></a>Why Feign?</h3><p>Without Feign, In Spring Boot Applications We will be using <code>RestTemplate</code> to call User service. We need to write code somewhat similar to below. </p>
<figure class="highlight java"><figcaption><span>HTTP Client Using RestTemplate</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getAllUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Calling User Service using Feign Client!!"</span>);</span><br><span class="line">        RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">        ResponseEntity&lt;List&lt;User&gt;&gt; response = restTemplate.exchange(</span><br><span class="line">                <span class="string">"http://localhost:8080/user/"</span>,</span><br><span class="line">                HttpMethod.GET,</span><br><span class="line">                <span class="keyword">null</span>,</span><br><span class="line">                <span class="keyword">new</span> ParameterizedTypeReference&lt;List&lt;User&gt;&gt;() &#123;</span><br><span class="line">                &#125;);</span><br><span class="line">        List&lt;User&gt; users = response.getBody();</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">int</span> id) </span>&#123;</span><br><span class="line">        Map&lt;String, String&gt; uriParams = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        uriParams.put(<span class="string">"id"</span>, String.valueOf(id));</span><br><span class="line">        URI uri = UriComponentsBuilder</span><br><span class="line">                .fromUriString(<span class="string">"http://localhost:8080/user/&#123;id&#125;"</span>)</span><br><span class="line">                .buildAndExpand(uriParams)</span><br><span class="line">                .toUri();</span><br><span class="line">        System.out.println(uri);</span><br><span class="line">        RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">        User forEntity = restTemplate.getForObject(uri, User.class);</span><br><span class="line">        <span class="keyword">return</span> forEntity;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">addUser</span><span class="params">(@RequestBody User user)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Add user"</span>);</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line">        RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">        HttpEntity&lt;User&gt; request = <span class="keyword">new</span> HttpEntity&lt;&gt;(user);</span><br><span class="line">        ResponseEntity exchange = restTemplate</span><br><span class="line">                .exchange(<span class="string">"http://localhost:8080/user/"</span>, HttpMethod.POST, request, String.class);</span><br><span class="line">        <span class="keyword">return</span> exchange;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">deleteUser</span><span class="params">(@PathVariable <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"delete user"</span>);</span><br><span class="line">        Map&lt;String, String&gt; params = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        params.put(<span class="string">"id"</span>, String.valueOf(id));</span><br><span class="line">        RestTemplate restTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">        restTemplate.delete(<span class="string">"http://localhost:8080/user/&#123;id&#125;"</span>, params);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity(<span class="string">"User Deleted successfully"</span>, HttpStatus.OK);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure> 
<blockquote><p>From above code we can easily figure out that most of the code is repetitive and has nothing to do the business logic. Let’s Simplify Above code using Spring Cloud OpenFeign. </p>
</blockquote>
<h3 id="Getting-Started-With-Spring-Cloud-OpenFeign"><a href="#Getting-Started-With-Spring-Cloud-OpenFeign" class="headerlink" title="Getting Started With Spring Cloud OpenFeign"></a>Getting Started With Spring Cloud OpenFeign</h3><p>To include Feign in project We need to use artifact id  <code>spring-cloud-starter-openfeign</code><br><figure class="highlight"><figcaption><span>openfeign Maven</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   &lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure> </p>
<p><strong>EnableFeignClients</strong><br><figure class="highlight java"><figcaption><span>EnableFeignClients</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringCloudFeignClientDemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(SpringCloudFeignClientDemoApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Creating Feign Client With Sensible Defaults.<br><figure class="highlight java"><figcaption><span>FeignClient</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@FeignClient</span>(name = <span class="string">"User"</span>, url = <span class="string">"http://localhost:8080"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.GET, value = <span class="string">"/user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getAllUsers</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.GET, value = <span class="string">"/user/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">User <span class="title">getUser</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.DELETE, value = <span class="string">"/user/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">ResponseEntity <span class="title">deleteUser</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.POST, value = <span class="string">"/user/"</span>)</span><br><span class="line">    <span class="function">ResponseEntity <span class="title">addUser</span><span class="params">(@RequestBody User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(method = RequestMethod.PUT, value = <span class="string">"/user/"</span>)</span><br><span class="line">    <span class="function">ResponseEntity <span class="title">updateUser</span><span class="params">(User user)</span></span>;&#125;</span><br></pre></td></tr></table></figure></p>
<p>The above code is self explanatory. At minimal we just have to specify <code>name = &quot;User&quot;</code>  is an arbitrary client name and url.<br>If we compare our <code>UserClient</code> with the code that we have written using <code>RestTemplate</code>, It’s visible that without writing any code specific to calling HTTP Service our UserClient supports all operations. <code>Feign</code> is doing magic under the hood. </p>
<h3 id="Overriding-Feign-default-properties"><a href="#Overriding-Feign-default-properties" class="headerlink" title="Overriding Feign default properties"></a>Overriding Feign default properties</h3><p>We Can provide custom configuration class to Overriding default properties.<br>e.g. let say we want to Log the headers, body, and metadata for both requests and responses.<br>lets Create UserClientConfig class to setup log level.<br><figure class="highlight java"><figcaption><span>UserClientConfig</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserClientConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    Logger.<span class="function">Level <span class="title">feignLoggerLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.HEADERS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Update UserClient To use this config class.<br> <figure class="highlight java"><figcaption><span>Updated FeignClient</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@FeignClient</span>(name = <span class="string">"User"</span>, url = <span class="string">"http://localhost:8080"</span>,configuration=UserClientConfig.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Note</strong> : Feign gets integrated with <strong>Hystrix, Ribbon and Eureka</strong> quite easily. I will cover that in separate Post.   </p>
<p><strong>The code for this post is available for download <a href="https://github.com/nirajsonawane/Spring-Cloud-Feign-Demo" target="_blank" rel="noopener">here</a>.</strong></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://nirajsonawane.github.io/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/" data-id="cl250z73a0018x36bcczht2z5" class="article-share-link"><i class="fas fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://nirajsonawane.github.io/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://nirajsonawane.github.io/2019/03/21/Simplifying-Microservices-Communication-Using-Spring-Cloud-OpenFeign/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2022/04/18/Spring-Boot-AWS-RDS/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/aws-rds-logo-png-transparent.png)" alt="Spring Boot With AWS RDS - Part 1" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2022/04/18/Spring-Boot-AWS-RDS/" class="title">Spring Boot With AWS RDS - Part 1</a></p>
                            <p class="item-date"><time datetime="2022-04-18T09:56:34.000Z" itemprop="datePublished">2022-04-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/05/16/Spring-Boot-with-AWS-S3/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Spring Boot With AWS S3" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/05/16/Spring-Boot-with-AWS-S3/" class="title">Spring Boot With AWS S3</a></p>
                            <p class="item-date"><time datetime="2021-05-16T20:17:01.000Z" itemprop="datePublished">2021-05-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/05/09/Spring-Boot-with-AWS-sqs/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Spring Boot With AWS SQS" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/05/09/Spring-Boot-with-AWS-sqs/" class="title">Spring Boot With AWS SQS</a></p>
                            <p class="item-date"><time datetime="2021-05-09T15:09:52.000Z" itemprop="datePublished">2021-05-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/04/25/spring-boot-with-hibernate-envers/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Spring Boot With Hibernate Envers" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/04/25/spring-boot-with-hibernate-envers/" class="title">Spring Boot With Hibernate Envers</a></p>
                            <p class="item-date"><time datetime="2021-04-25T19:30:36.000Z" itemprop="datePublished">2021-04-25</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/" class="thumbnail">
    
    

    
        <span style="background-image:url(/asset/spring-boot.png)" alt="Consumer Driven Contract Test Using Spring Cloud Contract" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2021/02/20/Contract-Testing-Using-Spring-Cloud-Contract/" class="title">Consumer Driven Contract Test Using Spring Cloud Contract</a></p>
                            <p class="item-date"><time datetime="2021-02-20T20:00:29.000Z" itemprop="datePublished">2021-02-20</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/AOP/" style="font-size: 10px;">AOP</a> <a href="/tags/AWS/" style="font-size: 13.75px;">AWS</a> <a href="/tags/Angular6/" style="font-size: 11.25px;">Angular6</a> <a href="/tags/Bigdecimal/" style="font-size: 10px;">Bigdecimal</a> <a href="/tags/Cloud-Bus/" style="font-size: 10px;">Cloud Bus</a> <a href="/tags/Cloud-Config/" style="font-size: 10px;">Cloud Config</a> <a href="/tags/Collector/" style="font-size: 10px;">Collector</a> <a href="/tags/Comparator/" style="font-size: 11.25px;">Comparator</a> <a href="/tags/Concurrency/" style="font-size: 17.5px;">Concurrency</a> <a href="/tags/Contract-Testing/" style="font-size: 10px;">Contract Testing</a> <a href="/tags/Docker/" style="font-size: 11.25px;">Docker</a> <a href="/tags/Eureka/" style="font-size: 10px;">Eureka</a> <a href="/tags/Filter/" style="font-size: 10px;">Filter</a> <a href="/tags/Functional-Programming/" style="font-size: 10px;">Functional Programming</a> <a href="/tags/Grafana/" style="font-size: 11.25px;">Grafana</a> <a href="/tags/Helm/" style="font-size: 10px;">Helm</a> <a href="/tags/Hibernate-Envers/" style="font-size: 10px;">Hibernate Envers</a> <a href="/tags/JPA/" style="font-size: 10px;">JPA</a> <a href="/tags/JUnit-5/" style="font-size: 10px;">JUnit-5</a> <a href="/tags/JWT/" style="font-size: 10px;">JWT</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java-8/" style="font-size: 20px;">Java-8</a> <a href="/tags/Java-9/" style="font-size: 13.75px;">Java-9</a> <a href="/tags/Kotlin/" style="font-size: 10px;">Kotlin</a> <a href="/tags/Kotlin-Types/" style="font-size: 10px;">Kotlin Types</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Map/" style="font-size: 13.75px;">Map</a> <a href="/tags/Material/" style="font-size: 10px;">Material</a> <a href="/tags/Microservice/" style="font-size: 16.25px;">Microservice</a> <a href="/tags/Minikube/" style="font-size: 10px;">Minikube</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Mongodb/" style="font-size: 11.25px;">Mongodb</a> <a href="/tags/Multithreading/" style="font-size: 17.5px;">Multithreading</a> <a href="/tags/Navigation/" style="font-size: 10px;">Navigation</a> <a href="/tags/OpenFeign/" style="font-size: 10px;">OpenFeign</a> <a href="/tags/Optional/" style="font-size: 10px;">Optional</a> <a href="/tags/Pipes/" style="font-size: 10px;">Pipes</a> <a href="/tags/PostgreSQL/" style="font-size: 10px;">PostgreSQL</a> <a href="/tags/Project-Reactor/" style="font-size: 12.5px;">Project Reactor</a> <a href="/tags/Prometheus/" style="font-size: 11.25px;">Prometheus</a> <a href="/tags/RDS/" style="font-size: 10px;">RDS</a> <a href="/tags/RXjava/" style="font-size: 10px;">RXjava</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Reactive-Programming/" style="font-size: 13.75px;">Reactive Programming</a> <a href="/tags/ReactiveX/" style="font-size: 10px;">ReactiveX</a> <a href="/tags/Rest/" style="font-size: 10px;">Rest</a> <a href="/tags/Ribbon/" style="font-size: 10px;">Ribbon</a> <a href="/tags/Routing/" style="font-size: 10px;">Routing</a> <a href="/tags/S3/" style="font-size: 10px;">S3</a> <a href="/tags/SQS/" style="font-size: 10px;">SQS</a> <a href="/tags/Smart-Casts/" style="font-size: 10px;">Smart Casts</a> <a href="/tags/Sorting/" style="font-size: 13.75px;">Sorting</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 18.75px;">Spring Boot</a> <a href="/tags/Spring-Boot-Admin/" style="font-size: 10px;">Spring Boot Admin</a> <a href="/tags/Spring-Boot-Starter/" style="font-size: 10px;">Spring Boot Starter</a> <a href="/tags/Spring-Cloud/" style="font-size: 15px;">Spring Cloud</a> <a href="/tags/Spring-Cloud-Contract/" style="font-size: 10px;">Spring Cloud Contract</a> <a href="/tags/Spring-Security/" style="font-size: 10px;">Spring Security</a> <a href="/tags/Spring-Batch/" style="font-size: 10px;">Spring-Batch</a> <a href="/tags/Stream/" style="font-size: 13.75px;">Stream</a> <a href="/tags/Streams/" style="font-size: 10px;">Streams</a> <a href="/tags/Summary-Statistics/" style="font-size: 10px;">Summary Statistics</a> <a href="/tags/Swagger/" style="font-size: 10px;">Swagger</a> <a href="/tags/Unit-Testing/" style="font-size: 10px;">Unit Testing</a> <a href="/tags/WebFlux/" style="font-size: 12.5px;">WebFlux</a> <a href="/tags/containers/" style="font-size: 10px;">containers</a> <a href="/tags/kubernetes/" style="font-size: 10px;">kubernetes</a> <a href="/tags/pact/" style="font-size: 10px;">pact</a> <a href="/tags/testcontainers/" style="font-size: 10px;">testcontainers</a>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">9</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://stackoverflow.com/users/320087/niraj-sonawane?tab=profile">StackOverflow</a>
                    </li>
                
                    <li>
                        <a href="https://nirajsonawane.github.io/portfolio/">Portfolio</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2022 Niraj Sonawane<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
        this.page.identifier = '';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'https-nirajsonawane-github-io-1' + '.disqus.com/count.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>